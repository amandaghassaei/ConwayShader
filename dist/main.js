(()=>{var e={607:(e,t,r)=>{"use strict";var i=r(561),n=r(645),o=r(539),a=r(950),s=document.getElementById("glcanvas"),u=new i.GPGPU(null,s);u.initProgram("gol",n,[{name:"u_state",value:0,dataType:"INT"},{name:"u_pxSize",value:[1/s.clientWidth,1/s.clientHeight],dataType:"FLOAT"}]),u.initProgram("render",o,[{name:"u_state",value:0,dataType:"INT"}]),u.initProgram("interaction",a,[{name:"u_noiseLookup",value:0,dataType:"INT"}]);function l(e,t){void 0===t&&(t=.1);for(var r=new Uint8Array(e),i=0,n=r.length;i<n;i++)r[i]=Math.random()<t?255:0;return r}function f(){var e=s.clientWidth,t=s.clientHeight,r=l(e*t);u.initTexture("currentState",e,t,"uint8",1,!0,void 0,!0),u.initTexture("lastState",e,t,"uint8",1,!0,r,!0),u.setProgramUniform("gol","u_pxSize",[1/e,1/t],"FLOAT"),u.onResize(s)}u.initTexture("noiseLookup",20,20,"uint8",1,!1,l(400,.5)),window.onmousemove=function(e){u.stepCircle("interaction",[e.clientX,e.clientY],10,["noiseLookup"],"lastState")},window.ontouchmove=function(e){e.preventDefault();for(var t=0;t<e.touches.length;t++){var r=e.touches[t];u.stepCircle("interaction",[r.pageX,r.pageY],10,["noiseLookup"],"lastState")}},window.addEventListener("resize",f),f(),window.requestAnimationFrame((function e(){u.step("gol",["lastState"],"currentState"),u.step("render",["currentState"]),u.swapTextures("currentState","lastState"),window.requestAnimationFrame(e)}))},576:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GPGPU=void 0;for(var i=r(416),n=r(647),o=new Float32Array([-1,-1,1,-1,-1,1,1,1]),a=new Float32Array([-1,-1,1,-1,1,1,-1,1]),s=[0,0],u=0;u<=20;u++)s.push(Math.cos(2*Math.PI*u/20),Math.sin(2*Math.PI*u/20));var l=new Float32Array(s),f=function(){function e(e,t,r){void 0===r&&(r=function(e){throw new Error(e)}),this.errorState=!1,this.programs={},this.textures={},this.framebuffers={},this.shaders=[];var n=this;if(this.errorCallback=function(e){n.errorState=!0,r&&r(e)},e||null!==(e=t.getContext("webgl2",{antialias:!1})||t.getContext("webgl",{antialias:!1}))){this.gl=e,e.HALF_FLOAT||this.loadExtension("OES_texture_half_float"),this.linearFilterEnabled=this.loadExtension("OES_texture_half_float_linear",!0),e.disable(e.DEPTH_TEST),e.pixelStorei(e.UNPACK_ALIGNMENT,1);var s=this.compileShader(i.default,e.VERTEX_SHADER);if(s){this.defaultVertexShader=s,this.quadPositionsBuffer=this.initVertexBuffer(o),this.boundaryPositionsBuffer=this.initVertexBuffer(a),this.circlePositionsBuffer=this.initVertexBuffer(l),e.bindBuffer(e.ARRAY_BUFFER,null),this.onResize(t);var u=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS);console.log(u+" textures max.")}else r("Unable to initialize fullscreen quad vertex shader.")}else r("Unable to initialize WebGL context.")}return e.prototype.initVertexBuffer=function(e){var t=this.errorCallback,r=this.gl,i=r.createBuffer();if(i)return r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW),i;t("Unable to allocate gl buffer.")},e.prototype.loadExtension=function(e,t){var r;void 0===t&&(t=!1);try{r=this.gl.getExtension(e)}catch(e){}return r||console.warn("Unsupported "+(t?"optional ":"")+"extension: "+e+"."),r||t||this.errorCallback("Required extension unsupported by this device / browser: "+e+"."),!!r},e.prototype.compileShader=function(e,t){var r=this.gl,i=r.createShader(t);return i?(r.shaderSource(i,e),r.compileShader(i),r.getShaderParameter(i,r.COMPILE_STATUS)?(this.shaders.push(i),i):(this.errorCallback("Could not compile "+(t===r.FRAGMENT_SHADER?"fragment":"vertex")+"\n\t\t\t\t shader: "+r.getShaderInfoLog(i)),null)):(this.errorCallback("Unable to init gl shader."),null)},e.prototype.initProgram=function(e,t,r){var i=this,n=this.programs,o=this.gl;if(n[e])return o.useProgram(n[e].program),void console.warn("Already a program with the name "+e+".");var a=this.compileShader(t,o.FRAGMENT_SHADER),s=this.defaultVertexShader;if(a&&s){var u=o.createProgram();u?(o.attachShader(u,s),o.attachShader(u,a),o.linkProgram(u),o.getProgramParameter(u,o.LINK_STATUS)||this.errorCallback("Program "+e+" filed to link: "+o.getProgramInfoLog(u)),n[e]={program:u,uniforms:{}},null==r||r.forEach((function(t){var r=t.name,n=t.value,o=t.dataType;i.setProgramUniform(e,r,n,o)}))):this.errorCallback("Unable to init gl program.")}else this.errorCallback("Unable to init shaders for program "+e+".")},e.prototype.uniformTypeForValue=function(e,t){if(t===n.FLOAT_TYPE){if(!isNaN(e)||1===e.length)return n.FLOAT_1D_UNIFORM;if(2===e.length)return n.FLOAT_2D_UNIFORM;if(3===e.length)return n.FLOAT_3D_UNIFORM;if(4===e.length)return n.FLOAT_4D_UNIFORM;throw new Error("Invalid uniform value: "+e)}if(t===n.INT_TYPE){if(!isNaN(e)||1===e.length)return n.INT_1D_UNIFORM;if(2===e.length)return n.INT_2D_UNIFORM;if(3===e.length)return n.INT_3D_UNIFORM;if(4===e.length)return n.INT_4D_UNIFORM;throw new Error("Invalid uniform value: "+e)}throw new Error("Invalid uniform data type: "+t)},e.prototype.setProgramUniform=function(e,t,r,i){var o=this.gl,a=this.programs[e];if(!a)throw new Error("Count not set uniform, no program of name: "+e+".");o.useProgram(a.program);var s=a.uniforms,u=this.uniformTypeForValue(r,i);if(!s[t]){var l=o.getUniformLocation(a.program,t);if(!l)return void this.errorCallback("Could not init uniform "+t+" for program "+e+".\nCheck that uniform is present in shader code, unused uniforms may be removed by compiler.\nAlso check that uniform type in shader code matches type "+u+".\nError code: "+o.getError()+".");s[t]={location:l,type:u}}var f=s[t];if(f.type!=u)throw new Error("Uniform "+t+" cannot change from type "+f.type+" to type "+u+".");var h=f.location;switch(u){case n.FLOAT_1D_UNIFORM:o.uniform1f(h,r);break;case n.FLOAT_2D_UNIFORM:o.uniform2fv(h,r);break;case n.FLOAT_3D_UNIFORM:o.uniform3fv(h,r);break;case n.FLOAT_4D_UNIFORM:o.uniform4fv(h,r);break;case n.INT_1D_UNIFORM:o.uniform1i(h,r);break;case n.INT_2D_UNIFORM:o.uniform2iv(h,r);break;case n.INT_3D_UNIFORM:o.uniform3iv(h,r);break;case n.INT_4D_UNIFORM:o.uniform4iv(h,r);break;default:throw new Error("Unknown uniform type: "+u+".")}},e.prototype.initFramebufferForTexture=function(e,t){void 0===t&&(t=!1);var r=this.gl,i=this.framebuffers;i[e]&&(t||console.warn("Already a framebuffer with the name "+e+", use shouldOverwrite flag in initTexture() to ignore."),r.deleteFramebuffer(i[e]));var n=this.textures[e];if(!n)throw new Error("Cannot init framebuffer, texture "+e+" does not exist.");var o=r.createFramebuffer();if(o){r.bindFramebuffer(r.FRAMEBUFFER,o),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0);var a=r.checkFramebufferStatus(r.FRAMEBUFFER);a!=r.FRAMEBUFFER_COMPLETE&&this.errorCallback("Invalid status for "+e+" framebuffer: "+a+"."),this.framebuffers[e]=o}else this.errorCallback("Could not init "+e+" framebuffer: "+r.getError()+".")},e.prototype.glTextureFormatForNumChannels=function(e){var t=this.gl;switch(e){case 1:case 2:case 3:return{glFormat:t.RGB,glNumChannels:3};case 4:return{glFormat:t.RGBA,glNumChannels:4}}},e.prototype.glTextureTypeForType=function(e){var t=this.gl;switch(e){case"float16":return t.HALF_FLOAT?t.HALF_FLOAT:t.HALF_FLOAT_OES;case"uint8":return t.UNSIGNED_BYTE}},e.prototype.initTexture=function(e,t,r,i,n,o,a,s){void 0===o&&(o=!1),void 0===s&&(s=!1);var u=this,l=u.gl,f=u.textures,h=u.framebuffers;if(f[e]&&(s||console.warn("Already a texture with the name "+e+", use shouldOverwrite flag to ignore."),l.deleteTexture(f[e])),a&&a.length!==t*r*n)throw new Error("Invalid data array of size "+a.length+" for texture of dimensions "+t+" x "+r+" x "+n+".");var c=l.createTexture();if(c){l.bindTexture(l.TEXTURE_2D,c),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);var _=l.NEAREST;l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,_),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,_);var m=this.glTextureFormatForNumChannels(n),d=m.glFormat,T=m.glNumChannels,p=this.glTextureTypeForType(i);if(a&&n!==T){var g=t*r,v=void 0;switch(i){case"uint8":v=new Uint8Array(t*r*T);break;default:throw new Error("Unsupported type "+i+" for initTexture.")}for(var F=0;F<g;F++)for(var E=0;E<n;E++)v[T*F+E]=a[F*n+E];a=v}l.texImage2D(l.TEXTURE_2D,0,d,t,r,0,d,p,a||null),f[e]=c,o?this.initFramebufferForTexture(e,s):s&&h[e]&&(l.deleteFramebuffer(h[e]),delete h[e])}else this.errorCallback("Could not init "+e+" texture: "+l.getError()+".")},e.prototype.onResize=function(e){var t=this.gl,r=e.clientWidth,i=e.clientHeight;t.viewport(0,0,r,i),e.width=r,e.height=i,this.width=r,this.height=i},e.prototype._step=function(e,t,r){var i=this,n=i.gl,o=i.programs,a=i.framebuffers,s=o[e];if(!s)throw new Error("Invalid program name: "+e+".");n.useProgram(s.program);var u=r?a[r]:null;if(void 0===u)throw new Error("Invalid output texture: "+r+".");n.bindFramebuffer(n.FRAMEBUFFER,u);for(var l=0;l<t.length;l++)n.activeTexture(n.TEXTURE0+l),n.bindTexture(n.TEXTURE_2D,this.textures[t[l]]);var f=n.getAttribLocation(s.program,"aPosition");n.vertexAttribPointer(f,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(f)},e.prototype.step=function(e,t,r){void 0===t&&(t=[]);var i=this,n=i.gl,o=i.errorState,a=i.quadPositionsBuffer;o||(this.setProgramUniform(e,"u_scale",[1,1],"FLOAT"),this.setProgramUniform(e,"u_translation",[0,0],"FLOAT"),n.bindBuffer(n.ARRAY_BUFFER,a),this._step(e,t,r),n.drawArrays(n.TRIANGLE_STRIP,0,4))},e.prototype.stepBoundary=function(e,t,r){void 0===t&&(t=[]);var i=this,n=i.gl,o=i.errorState,a=i.boundaryPositionsBuffer;o||(this.setProgramUniform(e,"u_scale",[1,1],"FLOAT"),this.setProgramUniform(e,"u_translation",[0,0],"FLOAT"),n.bindBuffer(n.ARRAY_BUFFER,a),this._step(e,t,r),n.drawArrays(n.LINE_LOOP,0,4))},e.prototype.stepCircle=function(e,t,r,i,n){void 0===i&&(i=[]);var o=this,a=o.gl,s=o.errorState,u=o.circlePositionsBuffer,l=o.width,f=o.height;s||(this.setProgramUniform(e,"u_scale",[r/l,r/f],"FLOAT"),this.setProgramUniform(e,"u_translation",[2*t[0]/l-1,-2*t[1]/f+1],"FLOAT"),a.bindBuffer(a.ARRAY_BUFFER,u),this._step(e,i,n),a.drawArrays(a.TRIANGLE_FAN,0,22))},e.prototype.swapTextures=function(e,t){var r=this.textures[e];this.textures[e]=this.textures[t],this.textures[t]=r,r=this.framebuffers[e],this.framebuffers[e]=this.framebuffers[t],this.framebuffers[t]=r},e.prototype.reset=function(){var e=this,t=e.gl,r=e.programs,i=e.framebuffers,n=e.textures,o=e.shaders,a=e.defaultVertexShader;Object.keys(r).forEach((function(e){var i=r[e].program;t.deleteProgram(i),delete r[e]})),Object.keys(i).forEach((function(e){var r=i[e];t.deleteFramebuffer(r),delete i[e]})),Object.keys(n).forEach((function(e){var r=n[e];t.deleteTexture(r),delete n[e]}));for(var s=o.length-1;s>=0;s--)o[s]!==a&&(t.deleteShader(o[s]),o.splice(s,1))},e}();t.GPGPU=f},647:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INT_TYPE=t.FLOAT_TYPE=t.INT_4D_UNIFORM=t.INT_3D_UNIFORM=t.INT_2D_UNIFORM=t.INT_1D_UNIFORM=t.FLOAT_4D_UNIFORM=t.FLOAT_3D_UNIFORM=t.FLOAT_2D_UNIFORM=t.FLOAT_1D_UNIFORM=void 0,t.FLOAT_1D_UNIFORM="1f",t.FLOAT_2D_UNIFORM="2f",t.FLOAT_3D_UNIFORM="3f",t.FLOAT_4D_UNIFORM="3f",t.INT_1D_UNIFORM="1i",t.INT_2D_UNIFORM="2i",t.INT_3D_UNIFORM="3i",t.INT_4D_UNIFORM="3i",t.FLOAT_TYPE="FLOAT",t.INT_TYPE="INT"},561:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GPGPU=void 0;var i=r(576);Object.defineProperty(t,"GPGPU",{enumerable:!0,get:function(){return i.GPGPU}})},416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="\nprecision highp float;\nattribute vec2 aPosition;\nuniform vec2 u_scale;\nuniform vec2 u_translation;\nvarying vec2 uv;\nvoid main() {\n\t// Calculate UV coordinates [0, 1].\n\tuv = 0.5 * (aPosition + 1.0);\n\t// Apply transformations.\n\tvec2 position = u_scale * aPosition + u_translation;\n\t// Calculate vertex position.\n\tgl_Position = vec4(position, 0, 1);\n}\n"},645:e=>{e.exports="precision lowp float;\n\nvarying vec2 uv;\nuniform sampler2D u_state;\nuniform vec2 u_pxSize;\n\nvoid main() {\n\tfloat currentState = texture2D(u_state, uv).r;\n\n\tint count = 0;\n\tfor (int i = -1; i < 2; i++) {\n\t\tfor (int j =- 1; j < 2; j++) {\n\t\t\tif (i == 0 && j == 0) continue;\n\t\t\tvec2 neighborUV = uv + vec2(u_pxSize.x * float(i), u_pxSize.y * float(j)); // TODO: need float()?\n\t\t\tif (texture2D(u_state, neighborUV).r == 1.0) count++;\n\t\t}\n\t}\n\n\t// https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life#Rules\n\tif (count == 3 || (currentState == 1.0 && count == 2)) {\n\t\tgl_FragColor = vec4(1);\n\t\treturn;\n\t}\n\tgl_FragColor = vec4(0, 0, 0,1);\n}"},950:e=>{e.exports="precision lowp float;\n\nvarying vec2 uv;\nuniform sampler2D u_noiseLookup;\n\nvoid main() {\n\tfloat state = texture2D(u_noiseLookup, uv).r;\n\tgl_FragColor = vec4(state, 0, 0, 1);\n}\n"},539:e=>{e.exports="precision lowp float;\n\nvarying vec2 uv;\nuniform sampler2D u_state;\n\nvoid main() {\n\tfloat currentState = texture2D(u_state, uv).r;\n\tgl_FragColor = vec4(currentState, currentState, currentState, 1);\n}"}},t={};!function r(i){if(t[i])return t[i].exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb253YXlzaGFkZXIvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vY29ud2F5c2hhZGVyLy4vbm9kZV9tb2R1bGVzL3dlYmdsLWdwZ3B1L2Rpc3QvR1BHUFUuanMiLCJ3ZWJwYWNrOi8vY29ud2F5c2hhZGVyLy4vbm9kZV9tb2R1bGVzL3dlYmdsLWdwZ3B1L2Rpc3QvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2NvbndheXNoYWRlci8uL25vZGVfbW9kdWxlcy93ZWJnbC1ncGdwdS9kaXN0L2luZGV4LmpzIiwid2VicGFjazovL2NvbndheXNoYWRlci8uL25vZGVfbW9kdWxlcy93ZWJnbC1ncGdwdS9kaXN0L2tlcm5lbHMvRGVmYXVsdFZlcnRleFNoYWRlci5qcyIsIndlYnBhY2s6Ly9jb253YXlzaGFkZXIvLi9zcmMva2VybmVscy9HT0xTaGFkZXIuZ2xzbCIsIndlYnBhY2s6Ly9jb253YXlzaGFkZXIvLi9zcmMva2VybmVscy9JbnRlcmFjdGlvblNoYWRlci5nbHNsIiwid2VicGFjazovL2NvbndheXNoYWRlci8uL3NyYy9rZXJuZWxzL1JlbmRlclNoYWRlci5nbHNsIiwid2VicGFjazovL2NvbndheXNoYWRlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jb253YXlzaGFkZXIvd2VicGFjay9zdGFydHVwIl0sIm5hbWVzIjpbImdvbFNoYWRlclNvdXJjZSIsInJlbmRlclNoYWRlclNvdXJjZSIsImludGVyYWN0aW9uU2hhZGVyU291cmNlIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdwZ3B1IiwiR1BHUFUiLCJpbml0UHJvZ3JhbSIsIm5hbWUiLCJ2YWx1ZSIsImRhdGFUeXBlIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJtYWtlUmFuZG9tQXJyYXkiLCJsZW5ndGgiLCJwcm9iYWJpbGl0eSIsImFycmF5IiwiVWludDhBcnJheSIsImkiLCJNYXRoIiwicmFuZG9tIiwib25SZXNpemUiLCJ3aWR0aCIsImhlaWdodCIsImRhdGEiLCJpbml0VGV4dHVyZSIsInVuZGVmaW5lZCIsInNldFByb2dyYW1Vbmlmb3JtIiwiVE9VQ0hfUkFESVVTIiwid2luZG93Iiwib25tb3VzZW1vdmUiLCJlIiwic3RlcENpcmNsZSIsImNsaWVudFgiLCJjbGllbnRZIiwib250b3VjaG1vdmUiLCJwcmV2ZW50RGVmYXVsdCIsInRvdWNoZXMiLCJ0b3VjaCIsInBhZ2VYIiwicGFnZVkiLCJhZGRFdmVudExpc3RlbmVyIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic3RlcCIsInN3YXBUZXh0dXJlcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsIkRlZmF1bHRWZXJ0ZXhTaGFkZXJfMSIsImNvbnN0YW50c18xIiwiZnNRdWFkUG9zaXRpb25zIiwiRmxvYXQzMkFycmF5IiwiYm91bmRhcnlQb3NpdGlvbnMiLCJ1bml0Q2lyY2xlUG9pbnRzIiwicHVzaCIsImNvcyIsIlBJIiwic2luIiwiY2lyY2xlUG9zaXRpb25zIiwiZ2wiLCJjYW52YXNFbCIsImVycm9yQ2FsbGJhY2siLCJtZXNzYWdlIiwiRXJyb3IiLCJ0aGlzIiwiZXJyb3JTdGF0ZSIsInByb2dyYW1zIiwidGV4dHVyZXMiLCJmcmFtZWJ1ZmZlcnMiLCJzaGFkZXJzIiwic2VsZiIsImdldENvbnRleHQiLCJhbnRpYWxpYXMiLCJIQUxGX0ZMT0FUIiwibG9hZEV4dGVuc2lvbiIsImxpbmVhckZpbHRlckVuYWJsZWQiLCJkaXNhYmxlIiwiREVQVEhfVEVTVCIsInBpeGVsU3RvcmVpIiwiVU5QQUNLX0FMSUdOTUVOVCIsImRlZmF1bHRWZXJ0ZXhTaGFkZXIiLCJjb21waWxlU2hhZGVyIiwiZGVmYXVsdCIsIlZFUlRFWF9TSEFERVIiLCJxdWFkUG9zaXRpb25zQnVmZmVyIiwiaW5pdFZlcnRleEJ1ZmZlciIsImJvdW5kYXJ5UG9zaXRpb25zQnVmZmVyIiwiY2lyY2xlUG9zaXRpb25zQnVmZmVyIiwiYmluZEJ1ZmZlciIsIkFSUkFZX0JVRkZFUiIsIm1heFRleHR1cmVzSW5GcmFnbWVudFNoYWRlciIsImdldFBhcmFtZXRlciIsIk1BWF9URVhUVVJFX0lNQUdFX1VOSVRTIiwiY29uc29sZSIsImxvZyIsInByb3RvdHlwZSIsImJ1ZmZlciIsImNyZWF0ZUJ1ZmZlciIsImJ1ZmZlckRhdGEiLCJTVEFUSUNfRFJBVyIsImV4dGVuc2lvbiIsIm9wdGlvbmFsIiwiZXh0IiwiZ2V0RXh0ZW5zaW9uIiwid2FybiIsInNoYWRlclNvdXJjZSIsInNoYWRlclR5cGUiLCJzaGFkZXIiLCJjcmVhdGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsIkZSQUdNRU5UX1NIQURFUiIsImdldFNoYWRlckluZm9Mb2ciLCJwcm9ncmFtTmFtZSIsImZyYWdtZW50U2hhZGVyU291cmNlIiwidW5pZm9ybXMiLCJfdGhpcyIsInVzZVByb2dyYW0iLCJwcm9ncmFtIiwiZnJhZ21lbnRTaGFkZXIiLCJ2ZXJ0ZXhTaGFkZXIiLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJnZXRQcm9ncmFtUGFyYW1ldGVyIiwiTElOS19TVEFUVVMiLCJnZXRQcm9ncmFtSW5mb0xvZyIsImZvckVhY2giLCJ1bmlmb3JtIiwidW5pZm9ybVR5cGVGb3JWYWx1ZSIsIkZMT0FUX1RZUEUiLCJpc05hTiIsIkZMT0FUXzFEX1VOSUZPUk0iLCJGTE9BVF8yRF9VTklGT1JNIiwiRkxPQVRfM0RfVU5JRk9STSIsIkZMT0FUXzREX1VOSUZPUk0iLCJJTlRfVFlQRSIsIklOVF8xRF9VTklGT1JNIiwiSU5UXzJEX1VOSUZPUk0iLCJJTlRfM0RfVU5JRk9STSIsIklOVF80RF9VTklGT1JNIiwidW5pZm9ybU5hbWUiLCJ0eXBlIiwibG9jYXRpb25fMSIsImdldFVuaWZvcm1Mb2NhdGlvbiIsImdldEVycm9yIiwibG9jYXRpb24iLCJ1bmlmb3JtMWYiLCJ1bmlmb3JtMmZ2IiwidW5pZm9ybTNmdiIsInVuaWZvcm00ZnYiLCJ1bmlmb3JtMWkiLCJ1bmlmb3JtMml2IiwidW5pZm9ybTNpdiIsInVuaWZvcm00aXYiLCJpbml0RnJhbWVidWZmZXJGb3JUZXh0dXJlIiwidGV4dHVyZU5hbWUiLCJzaG91bGRPdmVyd3JpdGUiLCJkZWxldGVGcmFtZWJ1ZmZlciIsInRleHR1cmUiLCJmcmFtZWJ1ZmZlciIsImNyZWF0ZUZyYW1lYnVmZmVyIiwiYmluZEZyYW1lYnVmZmVyIiwiRlJBTUVCVUZGRVIiLCJmcmFtZWJ1ZmZlclRleHR1cmUyRCIsIkNPTE9SX0FUVEFDSE1FTlQwIiwiVEVYVFVSRV8yRCIsInN0YXR1cyIsImNoZWNrRnJhbWVidWZmZXJTdGF0dXMiLCJGUkFNRUJVRkZFUl9DT01QTEVURSIsImdsVGV4dHVyZUZvcm1hdEZvck51bUNoYW5uZWxzIiwibnVtQ2hhbm5lbHMiLCJnbEZvcm1hdCIsIlJHQiIsImdsTnVtQ2hhbm5lbHMiLCJSR0JBIiwiZ2xUZXh0dXJlVHlwZUZvclR5cGUiLCJIQUxGX0ZMT0FUX09FUyIsIlVOU0lHTkVEX0JZVEUiLCJ3cml0YWJsZSIsIl9hIiwiZGVsZXRlVGV4dHVyZSIsImNyZWF0ZVRleHR1cmUiLCJiaW5kVGV4dHVyZSIsInRleFBhcmFtZXRlcmkiLCJURVhUVVJFX1dSQVBfUyIsIkNMQU1QX1RPX0VER0UiLCJURVhUVVJFX1dSQVBfVCIsImZpbHRlciIsIk5FQVJFU1QiLCJURVhUVVJFX01JTl9GSUxURVIiLCJURVhUVVJFX01BR19GSUxURVIiLCJfYiIsImdsVHlwZSIsImltYWdlU2l6ZSIsIm5ld0FycmF5IiwiaiIsInRleEltYWdlMkQiLCJ2aWV3cG9ydCIsIl9zdGVwIiwiaW5wdXRUZXh0dXJlcyIsIm91dHB1dFRleHR1cmUiLCJhY3RpdmVUZXh0dXJlIiwiVEVYVFVSRTAiLCJwb3NpdGlvbkxvY2F0aW9uIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsImRyYXdBcnJheXMiLCJUUklBTkdMRV9TVFJJUCIsInN0ZXBCb3VuZGFyeSIsIkxJTkVfTE9PUCIsInBvc2l0aW9uIiwicmFkaXVzIiwiVFJJQU5HTEVfRkFOIiwiTlVNX1NFR01FTlRTX0NJUkNMRSIsInRleHR1cmUxTmFtZSIsInRleHR1cmUyTmFtZSIsInRlbXAiLCJyZXNldCIsImtleXMiLCJrZXkiLCJkZWxldGVQcm9ncmFtIiwiZGVsZXRlU2hhZGVyIiwic3BsaWNlIiwiR1BHUFVfMSIsImVudW1lcmFibGUiLCJnZXQiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIl0sIm1hcHBpbmdzIjoid0NBQUEsYUFDTUEsRUFBa0IsRUFBUSxLQUMxQkMsRUFBcUIsRUFBUSxLQUM3QkMsRUFBMEIsRUFBUSxLQUVsQ0MsRUFBU0MsU0FBU0MsZUFBZSxZQUNqQ0MsRUFBUSxJQUFJLEVBQUFDLE1BQU0sS0FBTUosR0FFOUJHLEVBQU1FLFlBQVksTUFBT1IsRUFBaUIsQ0FDekMsQ0FDQ1MsS0FBTSxVQUNOQyxNQUFPLEVBQ1BDLFNBQVUsT0FFWCxDQUNDRixLQUFNLFdBQ05DLE1BQU8sQ0FBQyxFQUFJUCxFQUFPUyxZQUFhLEVBQUlULEVBQU9VLGNBQzNDRixTQUFVLFdBR1pMLEVBQU1FLFlBQVksU0FBVVAsRUFBb0IsQ0FDL0MsQ0FDQ1EsS0FBTSxVQUNOQyxNQUFPLEVBQ1BDLFNBQVUsU0FHWkwsRUFBTUUsWUFBWSxjQUFlTixFQUF5QixDQUN6RCxDQUNDTyxLQUFNLGdCQUNOQyxNQUFPLEVBQ1BDLFNBQVUsU0FnQ1osU0FBU0csRUFBZ0JDLEVBQWdCQyxRQUFBLElBQUFBLE1BQUEsSUFFeEMsSUFEQSxJQUFNQyxFQUFRLElBQUlDLFdBQVdILEdBQ3BCSSxFQUFJLEVBQUcsRUFBU0YsRUFBTUYsT0FBUUksRUFBSSxFQUFRQSxJQUNsREYsRUFBTUUsR0FBS0MsS0FBS0MsU0FBV0wsRUFBYyxJQUFNLEVBRWhELE9BQU9DLEVBR1IsU0FBU0ssSUFFUixJ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XG5jb25zdCBnb2xTaGFkZXJTb3VyY2UgPSByZXF1aXJlKCcuL2tlcm5lbHMvR09MU2hhZGVyLmdsc2wnKTtcbmNvbnN0IHJlbmRlclNoYWRlclNvdXJjZSA9IHJlcXVpcmUoJy4va2VybmVscy9SZW5kZXJTaGFkZXIuZ2xzbCcpO1xuY29uc3QgaW50ZXJhY3Rpb25TaGFkZXJTb3VyY2UgPSByZXF1aXJlKCcuL2tlcm5lbHMvSW50ZXJhY3Rpb25TaGFkZXIuZ2xzbCcpO1xuXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2xjYW52YXMnKSAgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5jb25zdCBncGdwdSA9IG5ldyBHUEdQVShudWxsLCBjYW52YXMpO1xuXG5ncGdwdS5pbml0UHJvZ3JhbSgnZ29sJywgZ29sU2hhZGVyU291cmNlLCBbXG5cdHtcblx0XHRuYW1lOiAndV9zdGF0ZScsXG5cdFx0dmFsdWU6IDAsXG5cdFx0ZGF0YVR5cGU6ICdJTlQnLFxuXHR9LFxuXHR7XG5cdFx0bmFtZTogJ3VfcHhTaXplJyxcblx0XHR2YWx1ZTogWzEgLyBjYW52YXMuY2xpZW50V2lkdGgsIDEgLyBjYW52YXMuY2xpZW50SGVpZ2h0XSxcblx0XHRkYXRhVHlwZTogJ0ZMT0FUJyxcblx0fSxcbl0pO1xuZ3BncHUuaW5pdFByb2dyYW0oJ3JlbmRlcicsIHJlbmRlclNoYWRlclNvdXJjZSwgW1xuXHR7XG5cdFx0bmFtZTogJ3Vfc3RhdGUnLFxuXHRcdHZhbHVlOiAwLFxuXHRcdGRhdGFUeXBlOiAnSU5UJyxcblx0fSxcbl0pO1xuZ3BncHUuaW5pdFByb2dyYW0oJ2ludGVyYWN0aW9uJywgaW50ZXJhY3Rpb25TaGFkZXJTb3VyY2UsIFtcblx0e1xuXHRcdG5hbWU6ICd1X25vaXNlTG9va3VwJyxcblx0XHR2YWx1ZTogMCxcblx0XHRkYXRhVHlwZTogJ0lOVCcsXG5cdH0sXG5dKTtcblxuLy8gU2V0IHVwIGludGVyYWN0aW9ucy5cbmNvbnN0IFRPVUNIX1JBRElVUyA9IDEwO1xuLy8gQ3JlYXRlIGEgbG9va3VwIHRleHR1cmUgZm9yIGFkZGluZyBub2lzZSBvbiBpbnRlcmFjdGlvbi5cbmdwZ3B1LmluaXRUZXh0dXJlKFxuXHQnbm9pc2VMb29rdXAnLFxuXHRUT1VDSF9SQURJVVMgKiAyLFxuXHRUT1VDSF9SQURJVVMgKiAyLFxuXHQndWludDgnLFxuXHQxLFxuXHRmYWxzZSxcblx0bWFrZVJhbmRvbUFycmF5KDQgKiBUT1VDSF9SQURJVVMgKiBUT1VDSF9SQURJVVMsIDAuNSksXG4pO1xud2luZG93Lm9ubW91c2Vtb3ZlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcblx0Z3BncHUuc3RlcENpcmNsZSgnaW50ZXJhY3Rpb24nLCBbZS5jbGllbnRYLCBlLmNsaWVudFldLCBUT1VDSF9SQURJVVMsIFsnbm9pc2VMb29rdXAnXSwgJ2xhc3RTdGF0ZScpO1xufTtcbndpbmRvdy5vbnRvdWNobW92ZSA9IChlOiBUb3VjaEV2ZW50KSA9PiB7XG5cdGUucHJldmVudERlZmF1bHQoKTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBlLnRvdWNoZXMubGVuZ3RoOyBpKyspIHtcblx0XHRjb25zdCB0b3VjaCA9IGUudG91Y2hlc1tpXTtcblx0XHRncGdwdS5zdGVwQ2lyY2xlKCdpbnRlcmFjdGlvbicsIFt0b3VjaC5wYWdlWCwgdG91Y2gucGFnZVldLCBUT1VDSF9SQURJVVMsIFsnbm9pc2VMb29rdXAnXSwgJ2xhc3RTdGF0ZScpO1xuXHR9XG59O1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25SZXNpemUpO1xub25SZXNpemUoKTtcbndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG5cbi8vIE1ha2UgYSByYW5kb20gYXJyYXkgb2YgMSdzIGFuZCAwJ3MuXG5mdW5jdGlvbiBtYWtlUmFuZG9tQXJyYXkobGVuZ3RoOiBudW1iZXIsIHByb2JhYmlsaXR5ID0gMC4xKSB7XG5cdGNvbnN0IGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcblx0Zm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdFx0YXJyYXlbaV0gPSBNYXRoLnJhbmRvbSgpIDwgcHJvYmFiaWxpdHkgPyAyNTUgOiAwO1xuXHR9XG5cdHJldHVybiBhcnJheTtcbn1cblxuZnVuY3Rpb24gb25SZXNpemUoKSB7XG5cdC8vIFJlLWluaXQgdGV4dHVyZXMgYXQgbmV3IHNpemUuXG5cdGNvbnN0IHdpZHRoID0gY2FudmFzLmNsaWVudFdpZHRoO1xuXHRjb25zdCBoZWlnaHQgPSBjYW52YXMuY2xpZW50SGVpZ2h0O1xuXHRjb25zdCBkYXRhID0gbWFrZVJhbmRvbUFycmF5KHdpZHRoICogaGVpZ2h0KTtcblx0Z3BncHUuaW5pdFRleHR1cmUoJ2N1cnJlbnRTdGF0ZScsIHdpZHRoLCBoZWlnaHQsICd1aW50OCcsIDEsIHRydWUsIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cdGdwZ3B1LmluaXRUZXh0dXJlKCdsYXN0U3RhdGUnLCB3aWR0aCwgaGVpZ2h0LCAndWludDgnLCAxLCB0cnVlLCBkYXRhLCB0cnVlKTtcblx0Z3BncHUuc2V0UHJvZ3JhbVVuaWZvcm0oJ2dvbCcsICd1X3B4U2l6ZScsIFsxIC8gd2lkdGgsIDEgLyBoZWlnaHRdLCAnRkxPQVQnKTtcblx0Z3BncHUub25SZXNpemUoY2FudmFzKTtcbn1cblxuZnVuY3Rpb24gc3RlcCgpIHtcblx0Ly8gQ29tcHV0ZSBydWxlcy5cblx0Z3BncHUuc3RlcCgnZ29sJywgWydsYXN0U3RhdGUnXSwgJ2N1cnJlbnRTdGF0ZScpO1xuXHQvLyBSZW5kZXIgY3VycmVudCBzdGF0ZS5cblx0Z3BncHUuc3RlcCgncmVuZGVyJywgWydjdXJyZW50U3RhdGUnXSk7XG5cdC8vIFRvZ2dsZSB0ZXh0dXJlcy5cblx0Z3BncHUuc3dhcFRleHR1cmVzKCdjdXJyZW50U3RhdGUnLCAnbGFzdFN0YXRlJyk7XG5cdC8vIFN0YXJ0IGEgbmV3IHJlbmRlciBjeWNsZS5cblx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuR1BHUFUgPSB2b2lkIDA7XG52YXIgRGVmYXVsdFZlcnRleFNoYWRlcl8xID0gcmVxdWlyZShcIi4va2VybmVscy9EZWZhdWx0VmVydGV4U2hhZGVyXCIpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xudmFyIGZzUXVhZFBvc2l0aW9ucyA9IG5ldyBGbG9hdDMyQXJyYXkoWy0xLCAtMSwgMSwgLTEsIC0xLCAxLCAxLCAxXSk7XG52YXIgYm91bmRhcnlQb3NpdGlvbnMgPSBuZXcgRmxvYXQzMkFycmF5KFstMSwgLTEsIDEsIC0xLCAxLCAxLCAtMSwgMV0pO1xudmFyIHVuaXRDaXJjbGVQb2ludHMgPSBbMCwgMF07XG52YXIgTlVNX1NFR01FTlRTX0NJUkNMRSA9IDIwO1xuZm9yICh2YXIgaSA9IDA7IGkgPD0gTlVNX1NFR01FTlRTX0NJUkNMRTsgaSsrKSB7XG4gICAgdW5pdENpcmNsZVBvaW50cy5wdXNoKE1hdGguY29zKDIgKiBNYXRoLlBJICogaSAvIE5VTV9TRUdNRU5UU19DSVJDTEUpLCBNYXRoLnNpbigyICogTWF0aC5QSSAqIGkgLyBOVU1fU0VHTUVOVFNfQ0lSQ0xFKSk7XG59XG52YXIgY2lyY2xlUG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheSh1bml0Q2lyY2xlUG9pbnRzKTtcbi8vIFN0b3JlIGV4dGVuc2lvbnMgYXMgY29uc3RhbnRzLlxudmFyIE9FU19URVhUVVJFX0hBTEZfRkxPQVQgPSAnT0VTX3RleHR1cmVfaGFsZl9mbG9hdCc7XG52YXIgT0VTX1RFWFRVUkVfSEFsRl9GTE9BVF9MSU5FQVIgPSAnT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXInO1xudmFyIEdQR1BVID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEdQR1BVKGdsLCBjYW52YXNFbCwgXG4gICAgLy8gT3B0aW9uYWxseSBwYXNzIGluIGFuIGVycm9yIGNhbGxiYWNrIGluIGNhc2Ugd2Ugd2FudCB0byBoYW5kbGUgZXJyb3JzIHJlbGF0ZWQgdG8gd2ViZ2wgc3VwcG9ydC5cbiAgICAvLyBlLmcuIHRocm93IHVwIGEgbW9kYWwgdGVsbGluZyB1c2VyIHRoaXMgd2lsbCBub3Qgd29yayBvbiB0aGVpciBkZXZpY2UuXG4gICAgZXJyb3JDYWxsYmFjaykge1xuICAgICAgICBpZiAoZXJyb3JDYWxsYmFjayA9PT0gdm9pZCAwKSB7IGVycm9yQ2FsbGJhY2sgPSBmdW5jdGlvbiAobWVzc2FnZSkgeyB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7IH07IH1cbiAgICAgICAgdGhpcy5lcnJvclN0YXRlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJvZ3JhbXMgPSB7fTsgLy8gQWxsIGN1cnJlbnQgZ2wgcHJvZ3JhbXMuXG4gICAgICAgIHRoaXMudGV4dHVyZXMgPSB7fTsgLy8gQWxsIGN1cnJlbnQgZ2wgdGV4dHVyZXMuXG4gICAgICAgIHRoaXMuZnJhbWVidWZmZXJzID0ge307IC8vIEFsbCBjdXJyZW50IGdsIGZyYW1lYnVmZmVycy5cbiAgICAgICAgdGhpcy5zaGFkZXJzID0gW107IC8vIEtlZXAgdHJhY2sgb2YgYWxsIHNoYWRlcnMgaW5pdGVkIHNvIHRoZXkgY2FuIGJlIHByb3Blcmx5IGRlYWxsb2NhdGVkLlxuICAgICAgICAvLyBTYXZlIGNhbGxiYWNrIGluIGNhc2Ugd2UgcnVuIGludG8gYW4gZXJyb3IuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHNlbGYuZXJyb3JTdGF0ZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAoZXJyb3JDYWxsYmFjaylcbiAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrKG1lc3NhZ2UpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBJbml0IEdMLlxuICAgICAgICBpZiAoIWdsKSB7XG4gICAgICAgICAgICAvLyBJbml0IGEgZ2wgY29udGV4dCBpZiBub3QgcGFzc2VkIGluLlxuICAgICAgICAgICAgZ2wgPSBjYW52YXNFbC5nZXRDb250ZXh0KCd3ZWJnbDInLCB7IGFudGlhbGlhczogZmFsc2UgfSlcbiAgICAgICAgICAgICAgICB8fCBjYW52YXNFbC5nZXRDb250ZXh0KCd3ZWJnbCcsIHsgYW50aWFsaWFzOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIC8vIHx8IGNhbnZhc0VsLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcsIHthbnRpYWxpYXM6ZmFsc2V9KSBhcyBSZW5kZXJpbmdDb250ZXh0O1xuICAgICAgICAgICAgaWYgKGdsID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjaygnVW5hYmxlIHRvIGluaXRpYWxpemUgV2ViR0wgY29udGV4dC4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nbCA9IGdsO1xuICAgICAgICAvLyBHTCBzZXR1cC5cbiAgICAgICAgLy8gTG9hZCBleHRlbnNpb25zLlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvT0VTX3RleHR1cmVfaGFsZl9mbG9hdFxuICAgICAgICAvLyBIYWxmIGZsb2F0IGlzIHN1cHBvcnRlZCBieSBtb2Rlcm4gbW9iaWxlIGJyb3dzZXJzLCBmbG9hdCBub3QgeWV0IHN1cHBvcnRlZC5cbiAgICAgICAgLy8gSGFsZiBmbG9hdCBpcyBwcm92aWRlZCBieSBkZWZhdWx0IGZvciBXZWJnbDIgY29udGV4dHMuXG4gICAgICAgIC8vIFRoaXMgZXh0ZW5zaW9uIGltcGxpY2l0bHkgZW5hYmxlcyB0aGUgRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0IGV4dGVuc2lvbiAoaWYgc3VwcG9ydGVkKSwgd2hpY2ggYWxsb3dzIHJlbmRlcmluZyB0byAxNi1iaXQgZmxvYXRpbmcgcG9pbnQgZm9ybWF0cy5cbiAgICAgICAgaWYgKCFnbC5IQUxGX0ZMT0FUKVxuICAgICAgICAgICAgdGhpcy5sb2FkRXh0ZW5zaW9uKE9FU19URVhUVVJFX0hBTEZfRkxPQVQpO1xuICAgICAgICAvLyBMb2FkIG9wdGlvbmFsIGV4dGVuc2lvbnMuXG4gICAgICAgIHRoaXMubGluZWFyRmlsdGVyRW5hYmxlZCA9IHRoaXMubG9hZEV4dGVuc2lvbihPRVNfVEVYVFVSRV9IQWxGX0ZMT0FUX0xJTkVBUiwgdHJ1ZSk7XG4gICAgICAgIC8vIERpc2FibGUgZGVwdGggdGVzdGluZyBnbG9iYWxseS5cbiAgICAgICAgZ2wuZGlzYWJsZShnbC5ERVBUSF9URVNUKTtcbiAgICAgICAgLy8gU2V0IHVucGFjayBhbGlnbm1lbnQgdG8gMSBzbyB3ZSBjYW4gaGF2ZSB0ZXh0dXJlcyBvZiBhcmJpdHJhcnkgZGltZW5zaW9ucy5cbiAgICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTE1ODIyODIvZXJyb3Itd2hlbi1jcmVhdGluZy10ZXh0dXJlcy1pbi13ZWJnbC13aXRoLXRoZS1yZ2ItZm9ybWF0XG4gICAgICAgIGdsLnBpeGVsU3RvcmVpKGdsLlVOUEFDS19BTElHTk1FTlQsIDEpO1xuICAgICAgICAvLyBJbml0IGEgZGVmYXVsdCB2ZXJ0ZXggc2hhZGVyIHRoYXQganVzdCBwYXNzZXMgdGhyb3VnaCBzY3JlZW4gY29vcmRzLlxuICAgICAgICB2YXIgZGVmYXVsdFZlcnRleFNoYWRlciA9IHRoaXMuY29tcGlsZVNoYWRlcihEZWZhdWx0VmVydGV4U2hhZGVyXzEuZGVmYXVsdCwgZ2wuVkVSVEVYX1NIQURFUik7XG4gICAgICAgIGlmICghZGVmYXVsdFZlcnRleFNoYWRlcikge1xuICAgICAgICAgICAgZXJyb3JDYWxsYmFjaygnVW5hYmxlIHRvIGluaXRpYWxpemUgZnVsbHNjcmVlbiBxdWFkIHZlcnRleCBzaGFkZXIuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWZhdWx0VmVydGV4U2hhZGVyID0gZGVmYXVsdFZlcnRleFNoYWRlcjtcbiAgICAgICAgLy8gQ3JlYXRlIHZlcnRleCBidWZmZXJzLlxuICAgICAgICB0aGlzLnF1YWRQb3NpdGlvbnNCdWZmZXIgPSB0aGlzLmluaXRWZXJ0ZXhCdWZmZXIoZnNRdWFkUG9zaXRpb25zKTtcbiAgICAgICAgdGhpcy5ib3VuZGFyeVBvc2l0aW9uc0J1ZmZlciA9IHRoaXMuaW5pdFZlcnRleEJ1ZmZlcihib3VuZGFyeVBvc2l0aW9ucyk7XG4gICAgICAgIHRoaXMuY2lyY2xlUG9zaXRpb25zQnVmZmVyID0gdGhpcy5pbml0VmVydGV4QnVmZmVyKGNpcmNsZVBvc2l0aW9ucyk7XG4gICAgICAgIC8vIFVuYmluZCBhY3RpdmUgYnVmZmVyLlxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XG4gICAgICAgIC8vIENhbnZhcyBzZXR1cC5cbiAgICAgICAgdGhpcy5vblJlc2l6ZShjYW52YXNFbCk7XG4gICAgICAgIC8vIExvZyBudW1iZXIgb2YgdGV4dHVyZXMgYXZhaWxhYmxlLlxuICAgICAgICB2YXIgbWF4VGV4dHVyZXNJbkZyYWdtZW50U2hhZGVyID0gdGhpcy5nbC5nZXRQYXJhbWV0ZXIodGhpcy5nbC5NQVhfVEVYVFVSRV9JTUFHRV9VTklUUyk7XG4gICAgICAgIGNvbnNvbGUubG9nKG1heFRleHR1cmVzSW5GcmFnbWVudFNoYWRlciArIFwiIHRleHR1cmVzIG1heC5cIik7XG4gICAgfVxuICAgIEdQR1BVLnByb3RvdHlwZS5pbml0VmVydGV4QnVmZmVyID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgZXJyb3JDYWxsYmFjayA9IF9hLmVycm9yQ2FsbGJhY2ssIGdsID0gX2EuZ2w7XG4gICAgICAgIHZhciBidWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgICAgaWYgKCFidWZmZXIpIHtcbiAgICAgICAgICAgIGVycm9yQ2FsbGJhY2soJ1VuYWJsZSB0byBhbGxvY2F0ZSBnbCBidWZmZXIuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlcik7XG4gICAgICAgIC8vIEFkZCB2ZXJ0ZXggZGF0YSBmb3IgZHJhd2luZyBmdWxsIHNjcmVlbiBxdWFkIHZpYSB0cmlhbmdsZSBzdHJpcC5cbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIGRhdGEsIGdsLlNUQVRJQ19EUkFXKTtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9O1xuICAgIEdQR1BVLnByb3RvdHlwZS5sb2FkRXh0ZW5zaW9uID0gZnVuY3Rpb24gKGV4dGVuc2lvbiwgb3B0aW9uYWwpIHtcbiAgICAgICAgaWYgKG9wdGlvbmFsID09PSB2b2lkIDApIHsgb3B0aW9uYWwgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgZXh0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZXh0ID0gdGhpcy5nbC5nZXRFeHRlbnNpb24oZXh0ZW5zaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgIGlmICghZXh0KSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJVbnN1cHBvcnRlZCBcIiArIChvcHRpb25hbCA/ICdvcHRpb25hbCAnIDogJycpICsgXCJleHRlbnNpb246IFwiICsgZXh0ZW5zaW9uICsgXCIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZSBleHRlbnNpb24gaXMgbm90IG9wdGlvbmFsLCB0aHJvdyBlcnJvci5cbiAgICAgICAgaWYgKCFleHQgJiYgIW9wdGlvbmFsKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2soXCJSZXF1aXJlZCBleHRlbnNpb24gdW5zdXBwb3J0ZWQgYnkgdGhpcyBkZXZpY2UgLyBicm93c2VyOiBcIiArIGV4dGVuc2lvbiArIFwiLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gISFleHQ7XG4gICAgfTtcbiAgICAvLyBDb3BpZWQgZnJvbSBodHRwOi8vd2ViZ2xmdW5kYW1lbnRhbHMub3JnL3dlYmdsL2xlc3NvbnMvd2ViZ2wtYm9pbGVycGxhdGUuaHRtbFxuICAgIEdQR1BVLnByb3RvdHlwZS5jb21waWxlU2hhZGVyID0gZnVuY3Rpb24gKHNoYWRlclNvdXJjZSwgc2hhZGVyVHlwZSkge1xuICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xuICAgICAgICAvLyBDcmVhdGUgdGhlIHNoYWRlciBvYmplY3RcbiAgICAgICAgdmFyIHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihzaGFkZXJUeXBlKTtcbiAgICAgICAgaWYgKCFzaGFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjaygnVW5hYmxlIHRvIGluaXQgZ2wgc2hhZGVyLicpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IHRoZSBzaGFkZXIgc291cmNlIGNvZGUuXG4gICAgICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNoYWRlclNvdXJjZSk7XG4gICAgICAgIC8vIENvbXBpbGUgdGhlIHNoYWRlclxuICAgICAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG4gICAgICAgIC8vIENoZWNrIGlmIGl0IGNvbXBpbGVkXG4gICAgICAgIHZhciBzdWNjZXNzID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpO1xuICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIC8vIFNvbWV0aGluZyB3ZW50IHdyb25nIGR1cmluZyBjb21waWxhdGlvbiAtIHByaW50IHRoZSBlcnJvci5cbiAgICAgICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayhcIkNvdWxkIG5vdCBjb21waWxlIFwiICsgKHNoYWRlclR5cGUgPT09IGdsLkZSQUdNRU5UX1NIQURFUiA/ICdmcmFnbWVudCcgOiAndmVydGV4JykgKyBcIlxcblxcdFxcdFxcdFxcdCBzaGFkZXI6IFwiICsgZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2hhZGVycy5wdXNoKHNoYWRlcik7XG4gICAgICAgIHJldHVybiBzaGFkZXI7XG4gICAgfTtcbiAgICBHUEdQVS5wcm90b3R5cGUuaW5pdFByb2dyYW0gPSBmdW5jdGlvbiAocHJvZ3JhbU5hbWUsIGZyYWdtZW50U2hhZGVyU291cmNlLCB1bmlmb3Jtcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBwcm9ncmFtcyA9IF9hLnByb2dyYW1zLCBnbCA9IF9hLmdsO1xuICAgICAgICBpZiAocHJvZ3JhbXNbcHJvZ3JhbU5hbWVdKSB7XG4gICAgICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW1zW3Byb2dyYW1OYW1lXS5wcm9ncmFtKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkFscmVhZHkgYSBwcm9ncmFtIHdpdGggdGhlIG5hbWUgXCIgKyBwcm9ncmFtTmFtZSArIFwiLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZnJhZ21lbnRTaGFkZXIgPSB0aGlzLmNvbXBpbGVTaGFkZXIoZnJhZ21lbnRTaGFkZXJTb3VyY2UsIGdsLkZSQUdNRU5UX1NIQURFUik7XG4gICAgICAgIC8vIExvYWQgZnVsbHNjcmVlbiBxdWFkIHZlcnRleCBzaGFkZXIgYnkgZGVmYXVsdC5cbiAgICAgICAgLy8gY29uc3QgdmVydGV4U2hhZGVyID0gdmVydGV4U2hhZGVyU291cmNlID9cbiAgICAgICAgLy8gXHR0aGlzLmNvbXBpbGVTaGFkZXIodmVydGV4U2hhZGVyU291cmNlLCBnbC5WRVJURVhfU0hBREVSKSA6XG4gICAgICAgIC8vIFx0dGhpcy5mc1F1YWRWZXJ0ZXhTaGFkZXI7XG4gICAgICAgIHZhciB2ZXJ0ZXhTaGFkZXIgPSB0aGlzLmRlZmF1bHRWZXJ0ZXhTaGFkZXI7XG4gICAgICAgIGlmICghZnJhZ21lbnRTaGFkZXIgfHwgIXZlcnRleFNoYWRlcikge1xuICAgICAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrKFwiVW5hYmxlIHRvIGluaXQgc2hhZGVycyBmb3IgcHJvZ3JhbSBcIiArIHByb2dyYW1OYW1lICsgXCIuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIENyZWF0ZSBhIHByb2dyYW0uXG4gICAgICAgIHZhciBwcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuICAgICAgICBpZiAoIXByb2dyYW0pIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjaygnVW5hYmxlIHRvIGluaXQgZ2wgcHJvZ3JhbS4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBBdHRhY2ggdGhlIHNoYWRlcnMuXG4gICAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xuICAgICAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpO1xuICAgICAgICAvLyBMaW5rIHRoZSBwcm9ncmFtLlxuICAgICAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgaXQgbGlua2VkLlxuICAgICAgICB2YXIgc3VjY2VzcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpO1xuICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIC8vIFNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggdGhlIGxpbmsuXG4gICAgICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2soXCJQcm9ncmFtIFwiICsgcHJvZ3JhbU5hbWUgKyBcIiBmaWxlZCB0byBsaW5rOiBcIiArIGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgbmV3IHByb2dyYW0uXG4gICAgICAgIHByb2dyYW1zW3Byb2dyYW1OYW1lXSA9IHtcbiAgICAgICAgICAgIHByb2dyYW06IHByb2dyYW0sXG4gICAgICAgICAgICB1bmlmb3Jtczoge30sXG4gICAgICAgIH07XG4gICAgICAgIHVuaWZvcm1zID09PSBudWxsIHx8IHVuaWZvcm1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1bmlmb3Jtcy5mb3JFYWNoKGZ1bmN0aW9uICh1bmlmb3JtKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IHVuaWZvcm0ubmFtZSwgdmFsdWUgPSB1bmlmb3JtLnZhbHVlLCBkYXRhVHlwZSA9IHVuaWZvcm0uZGF0YVR5cGU7XG4gICAgICAgICAgICBfdGhpcy5zZXRQcm9ncmFtVW5pZm9ybShwcm9ncmFtTmFtZSwgbmFtZSwgdmFsdWUsIGRhdGFUeXBlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICA7XG4gICAgR1BHUFUucHJvdG90eXBlLnVuaWZvcm1UeXBlRm9yVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGRhdGFUeXBlKSB7XG4gICAgICAgIGlmIChkYXRhVHlwZSA9PT0gY29uc3RhbnRzXzEuRkxPQVRfVFlQRSkge1xuICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0YW50c18xLkZMT0FUXzFEX1VOSUZPUk07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0YW50c18xLkZMT0FUXzJEX1VOSUZPUk07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0YW50c18xLkZMT0FUXzNEX1VOSUZPUk07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSA0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0YW50c18xLkZMT0FUXzREX1VOSUZPUk07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHVuaWZvcm0gdmFsdWU6IFwiICsgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRhdGFUeXBlID09PSBjb25zdGFudHNfMS5JTlRfVFlQRSkge1xuICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0YW50c18xLklOVF8xRF9VTklGT1JNO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zdGFudHNfMS5JTlRfMkRfVU5JRk9STTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc3RhbnRzXzEuSU5UXzNEX1VOSUZPUk07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSA0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0YW50c18xLklOVF80RF9VTklGT1JNO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB1bmlmb3JtIHZhbHVlOiBcIiArIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdW5pZm9ybSBkYXRhIHR5cGU6IFwiICsgZGF0YVR5cGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBHUEdQVS5wcm90b3R5cGUuc2V0UHJvZ3JhbVVuaWZvcm0gPSBmdW5jdGlvbiAocHJvZ3JhbU5hbWUsIHVuaWZvcm1OYW1lLCB2YWx1ZSwgZGF0YVR5cGUpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgZ2wgPSBfYS5nbCwgcHJvZ3JhbXMgPSBfYS5wcm9ncmFtcztcbiAgICAgICAgdmFyIHByb2dyYW0gPSBwcm9ncmFtc1twcm9ncmFtTmFtZV07XG4gICAgICAgIGlmICghcHJvZ3JhbSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bnQgbm90IHNldCB1bmlmb3JtLCBubyBwcm9ncmFtIG9mIG5hbWU6IFwiICsgcHJvZ3JhbU5hbWUgKyBcIi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IGFjdGl2ZSBwcm9ncmFtLlxuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0ucHJvZ3JhbSk7XG4gICAgICAgIHZhciB1bmlmb3JtcyA9IHByb2dyYW0udW5pZm9ybXM7XG4gICAgICAgIHZhciB0eXBlID0gdGhpcy51bmlmb3JtVHlwZUZvclZhbHVlKHZhbHVlLCBkYXRhVHlwZSk7XG4gICAgICAgIGlmICghdW5pZm9ybXNbdW5pZm9ybU5hbWVdKSB7XG4gICAgICAgICAgICAvLyBJbml0IHVuaWZvcm0gaWYgbmVlZGVkLlxuICAgICAgICAgICAgdmFyIGxvY2F0aW9uXzEgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbS5wcm9ncmFtLCB1bmlmb3JtTmFtZSk7XG4gICAgICAgICAgICBpZiAoIWxvY2F0aW9uXzEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2soXCJDb3VsZCBub3QgaW5pdCB1bmlmb3JtIFwiICsgdW5pZm9ybU5hbWUgKyBcIiBmb3IgcHJvZ3JhbSBcIiArIHByb2dyYW1OYW1lICsgXCIuXFxuQ2hlY2sgdGhhdCB1bmlmb3JtIGlzIHByZXNlbnQgaW4gc2hhZGVyIGNvZGUsIHVudXNlZCB1bmlmb3JtcyBtYXkgYmUgcmVtb3ZlZCBieSBjb21waWxlci5cXG5BbHNvIGNoZWNrIHRoYXQgdW5pZm9ybSB0eXBlIGluIHNoYWRlciBjb2RlIG1hdGNoZXMgdHlwZSBcIiArIHR5cGUgKyBcIi5cXG5FcnJvciBjb2RlOiBcIiArIGdsLmdldEVycm9yKCkgKyBcIi5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdW5pZm9ybXNbdW5pZm9ybU5hbWVdID0ge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbl8xLFxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciB1bmlmb3JtID0gdW5pZm9ybXNbdW5pZm9ybU5hbWVdO1xuICAgICAgICAvLyBDaGVjayB0aGF0IHR5cGVzIG1hdGNoIHByZXZpb3VzbHkgc2V0IHVuaWZvcm0uXG4gICAgICAgIGlmICh1bmlmb3JtLnR5cGUgIT0gdHlwZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5pZm9ybSBcIiArIHVuaWZvcm1OYW1lICsgXCIgY2Fubm90IGNoYW5nZSBmcm9tIHR5cGUgXCIgKyB1bmlmb3JtLnR5cGUgKyBcIiB0byB0eXBlIFwiICsgdHlwZSArIFwiLlwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbG9jYXRpb24gPSB1bmlmb3JtLmxvY2F0aW9uO1xuICAgICAgICAvLyBTZXQgdW5pZm9ybS5cbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYkdMUmVuZGVyaW5nQ29udGV4dC91bmlmb3JtXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5GTE9BVF8xRF9VTklGT1JNOlxuICAgICAgICAgICAgICAgIGdsLnVuaWZvcm0xZihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5GTE9BVF8yRF9VTklGT1JNOlxuICAgICAgICAgICAgICAgIGdsLnVuaWZvcm0yZnYobG9jYXRpb24sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuRkxPQVRfM0RfVU5JRk9STTpcbiAgICAgICAgICAgICAgICBnbC51bmlmb3JtM2Z2KGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLkZMT0FUXzREX1VOSUZPUk06XG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybTRmdihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5JTlRfMURfVU5JRk9STTpcbiAgICAgICAgICAgICAgICBnbC51bmlmb3JtMWkobG9jYXRpb24sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuSU5UXzJEX1VOSUZPUk06XG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybTJpdihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5JTlRfM0RfVU5JRk9STTpcbiAgICAgICAgICAgICAgICBnbC51bmlmb3JtM2l2KGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLklOVF80RF9VTklGT1JNOlxuICAgICAgICAgICAgICAgIGdsLnVuaWZvcm00aXYobG9jYXRpb24sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB1bmlmb3JtIHR5cGU6IFwiICsgdHlwZSArIFwiLlwiKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgO1xuICAgIEdQR1BVLnByb3RvdHlwZS5pbml0RnJhbWVidWZmZXJGb3JUZXh0dXJlID0gZnVuY3Rpb24gKHRleHR1cmVOYW1lLCBzaG91bGRPdmVyd3JpdGUpIHtcbiAgICAgICAgaWYgKHNob3VsZE92ZXJ3cml0ZSA9PT0gdm9pZCAwKSB7IHNob3VsZE92ZXJ3cml0ZSA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGdsID0gX2EuZ2wsIGZyYW1lYnVmZmVycyA9IF9hLmZyYW1lYnVmZmVycztcbiAgICAgICAgaWYgKGZyYW1lYnVmZmVyc1t0ZXh0dXJlTmFtZV0pIHtcbiAgICAgICAgICAgIGlmICghc2hvdWxkT3ZlcndyaXRlKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkFscmVhZHkgYSBmcmFtZWJ1ZmZlciB3aXRoIHRoZSBuYW1lIFwiICsgdGV4dHVyZU5hbWUgKyBcIiwgdXNlIHNob3VsZE92ZXJ3cml0ZSBmbGFnIGluIGluaXRUZXh0dXJlKCkgdG8gaWdub3JlLlwiKTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZUZyYW1lYnVmZmVyKGZyYW1lYnVmZmVyc1t0ZXh0dXJlTmFtZV0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0ZXh0dXJlID0gdGhpcy50ZXh0dXJlc1t0ZXh0dXJlTmFtZV07XG4gICAgICAgIGlmICghdGV4dHVyZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGluaXQgZnJhbWVidWZmZXIsIHRleHR1cmUgXCIgKyB0ZXh0dXJlTmFtZSArIFwiIGRvZXMgbm90IGV4aXN0LlwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZnJhbWVidWZmZXIgPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xuICAgICAgICBpZiAoIWZyYW1lYnVmZmVyKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2soXCJDb3VsZCBub3QgaW5pdCBcIiArIHRleHR1cmVOYW1lICsgXCIgZnJhbWVidWZmZXI6IFwiICsgZ2wuZ2V0RXJyb3IoKSArIFwiLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyKTtcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYkdMUmVuZGVyaW5nQ29udGV4dC9mcmFtZWJ1ZmZlclRleHR1cmUyRFxuICAgICAgICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsIGdsLlRFWFRVUkVfMkQsIHRleHR1cmUsIDApO1xuICAgICAgICB2YXIgc3RhdHVzID0gZ2wuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhnbC5GUkFNRUJVRkZFUik7XG4gICAgICAgIGlmIChzdGF0dXMgIT0gZ2wuRlJBTUVCVUZGRVJfQ09NUExFVEUpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayhcIkludmFsaWQgc3RhdHVzIGZvciBcIiArIHRleHR1cmVOYW1lICsgXCIgZnJhbWVidWZmZXI6IFwiICsgc3RhdHVzICsgXCIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZnJhbWVidWZmZXJzW3RleHR1cmVOYW1lXSA9IGZyYW1lYnVmZmVyO1xuICAgIH07XG4gICAgO1xuICAgIEdQR1BVLnByb3RvdHlwZS5nbFRleHR1cmVGb3JtYXRGb3JOdW1DaGFubmVscyA9IGZ1bmN0aW9uIChudW1DaGFubmVscykge1xuICAgICAgICAvLyBUT0RPOiBmb3IgcmVhZCBvbmx5IHRleHR1cmVzIGluIFdlYkdMIDEuMCwgd2UgY291bGQgdXNlIGdsLkFMUEhBIGFuZCBnbC5MVU1JTkFOQ0VfQUxQSEEgaGVyZS5cbiAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcbiAgICAgICAgc3dpdGNoIChudW1DaGFubmVscykge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGdsRm9ybWF0OiBnbC5SR0IsXG4gICAgICAgICAgICAgICAgICAgIGdsTnVtQ2hhbm5lbHM6IDMsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBnbEZvcm1hdDogZ2wuUkdCLFxuICAgICAgICAgICAgICAgICAgICBnbE51bUNoYW5uZWxzOiAzLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZ2xGb3JtYXQ6IGdsLlJHQixcbiAgICAgICAgICAgICAgICAgICAgZ2xOdW1DaGFubmVsczogMyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGdsRm9ybWF0OiBnbC5SR0JBLFxuICAgICAgICAgICAgICAgICAgICBnbE51bUNoYW5uZWxzOiA0LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEdQR1BVLnByb3RvdHlwZS5nbFRleHR1cmVUeXBlRm9yVHlwZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnZmxvYXQxNic6XG4gICAgICAgICAgICAgICAgaWYgKGdsLkhBTEZfRkxPQVQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnbC5IQUxGX0ZMT0FUO1xuICAgICAgICAgICAgICAgIHJldHVybiBnbC5IQUxGX0ZMT0FUX09FUztcbiAgICAgICAgICAgIGNhc2UgJ3VpbnQ4JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2wuVU5TSUdORURfQllURTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgR1BHUFUucHJvdG90eXBlLmluaXRUZXh0dXJlID0gZnVuY3Rpb24gKHRleHR1cmVOYW1lLCB3aWR0aCwgaGVpZ2h0LCB0eXBlLCBudW1DaGFubmVscywgd3JpdGFibGUsIGRhdGEsIHNob3VsZE92ZXJ3cml0ZSkge1xuICAgICAgICBpZiAod3JpdGFibGUgPT09IHZvaWQgMCkgeyB3cml0YWJsZSA9IGZhbHNlOyB9XG4gICAgICAgIGlmIChzaG91bGRPdmVyd3JpdGUgPT09IHZvaWQgMCkgeyBzaG91bGRPdmVyd3JpdGUgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgX2EgPSB0aGlzLCBnbCA9IF9hLmdsLCB0ZXh0dXJlcyA9IF9hLnRleHR1cmVzLCBmcmFtZWJ1ZmZlcnMgPSBfYS5mcmFtZWJ1ZmZlcnM7XG4gICAgICAgIGlmICh0ZXh0dXJlc1t0ZXh0dXJlTmFtZV0pIHtcbiAgICAgICAgICAgIGlmICghc2hvdWxkT3ZlcndyaXRlKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkFscmVhZHkgYSB0ZXh0dXJlIHdpdGggdGhlIG5hbWUgXCIgKyB0ZXh0dXJlTmFtZSArIFwiLCB1c2Ugc2hvdWxkT3ZlcndyaXRlIGZsYWcgdG8gaWdub3JlLlwiKTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZVRleHR1cmUodGV4dHVyZXNbdGV4dHVyZU5hbWVdKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVjayB0aGF0IGRhdGEgaXMgY29ycmVjdCBsZW5ndGguXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoICE9PSB3aWR0aCAqIGhlaWdodCAqIG51bUNoYW5uZWxzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGEgYXJyYXkgb2Ygc2l6ZSBcIiArIGRhdGEubGVuZ3RoICsgXCIgZm9yIHRleHR1cmUgb2YgZGltZW5zaW9ucyBcIiArIHdpZHRoICsgXCIgeCBcIiArIGhlaWdodCArIFwiIHggXCIgKyBudW1DaGFubmVscyArIFwiLlwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgICAgICAgaWYgKCF0ZXh0dXJlKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2soXCJDb3VsZCBub3QgaW5pdCBcIiArIHRleHR1cmVOYW1lICsgXCIgdGV4dHVyZTogXCIgKyBnbC5nZXRFcnJvcigpICsgXCIuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUpO1xuICAgICAgICAvLyBUT0RPOiBkaWcgaW50byB0aGlzLlxuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7XG4gICAgICAgIHZhciBmaWx0ZXIgPSBnbC5ORUFSRVNUOyAvL3RoaXMubGluZWFyRmlsdGVyRW5hYmxlZCA/IGdsLkxJTkVBUiA6IGdsLk5FQVJFU1Q7XG4gICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBmaWx0ZXIpO1xuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZmlsdGVyKTtcbiAgICAgICAgLy8gVE9ETzogQ2hlY2sgdGhhdCBkYXRhIGlzIGNvcnJlY3QgdHlwZS5cbiAgICAgICAgLy8gaWYgKGRhdGEgJiYgdHlwZSA9PT0gJ2Zsb2F0MTYnKSB7XG4gICAgICAgIC8vIFx0Ly8gLy8gU2luY2UgdGhlcmUgaXMgbm8gRmxvYXQxNlR5cGVkQXJyYXksIHdlIG11c3QgY29udmVydCBGbG9hdDMyXG4gICAgICAgIC8vIFx0Ly8gLy8gdG8gRmxvYXQxNiBhbmQgcGFzcyBpbiBhcyBhbiBJbnQxNlR5cGVkQXJyYXkuXG4gICAgICAgIC8vIFx0Ly8gY29uc3QgZmxvYXQxNkFycmF5ID0gbmV3IEludDE2QXJyYXkoZGF0YS5sZW5ndGgpO1xuICAgICAgICAvLyBcdC8vIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBcdC8vIH1cbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViR0xSZW5kZXJpbmdDb250ZXh0L3RleEltYWdlMkRcbiAgICAgICAgdmFyIF9iID0gdGhpcy5nbFRleHR1cmVGb3JtYXRGb3JOdW1DaGFubmVscyhudW1DaGFubmVscyksIGdsRm9ybWF0ID0gX2IuZ2xGb3JtYXQsIGdsTnVtQ2hhbm5lbHMgPSBfYi5nbE51bUNoYW5uZWxzO1xuICAgICAgICB2YXIgZ2xUeXBlID0gdGhpcy5nbFRleHR1cmVUeXBlRm9yVHlwZSh0eXBlKTtcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCBkYXRhIGlzIGNvcnJlY3QgbGVuZ3RoLlxuICAgICAgICBpZiAoZGF0YSAmJiBudW1DaGFubmVscyAhPT0gZ2xOdW1DaGFubmVscykge1xuICAgICAgICAgICAgdmFyIGltYWdlU2l6ZSA9IHdpZHRoICogaGVpZ2h0O1xuICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gdm9pZCAwO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAndWludDgnOlxuICAgICAgICAgICAgICAgICAgICBuZXdBcnJheSA9IG5ldyBVaW50OEFycmF5KHdpZHRoICogaGVpZ2h0ICogZ2xOdW1DaGFubmVscyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHR5cGUgXCIgKyB0eXBlICsgXCIgZm9yIGluaXRUZXh0dXJlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZpbGwgbmV3IGRhdGEgYXJyYXkgd2l0aCBvbGQgZGF0YS5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1hZ2VTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG51bUNoYW5uZWxzOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3QXJyYXlbZ2xOdW1DaGFubmVscyAqIGkgKyBqXSA9IGRhdGFbaSAqIG51bUNoYW5uZWxzICsgal07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YSA9IG5ld0FycmF5O1xuICAgICAgICB9XG4gICAgICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2xGb3JtYXQsIHdpZHRoLCBoZWlnaHQsIDAsIGdsRm9ybWF0LCBnbFR5cGUsIGRhdGEgPyBkYXRhIDogbnVsbCk7XG4gICAgICAgIHRleHR1cmVzW3RleHR1cmVOYW1lXSA9IHRleHR1cmU7XG4gICAgICAgIGlmICghd3JpdGFibGUpIHtcbiAgICAgICAgICAgIC8vIERlbGV0ZSB1bnVzZWQgZnJhbWVidWZmZXIgaWYgbmVlZGVkLlxuICAgICAgICAgICAgaWYgKHNob3VsZE92ZXJ3cml0ZSAmJiBmcmFtZWJ1ZmZlcnNbdGV4dHVyZU5hbWVdKSB7XG4gICAgICAgICAgICAgICAgZ2wuZGVsZXRlRnJhbWVidWZmZXIoZnJhbWVidWZmZXJzW3RleHR1cmVOYW1lXSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGZyYW1lYnVmZmVyc1t0ZXh0dXJlTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW5pdCBhIGZyYW1lYnVmZmVyIGZvciB0aGlzIHRleHR1cmUgc28gd2UgY2FuIHdyaXRlIHRvIGl0LlxuICAgICAgICB0aGlzLmluaXRGcmFtZWJ1ZmZlckZvclRleHR1cmUodGV4dHVyZU5hbWUsIHNob3VsZE92ZXJ3cml0ZSk7XG4gICAgfTtcbiAgICA7XG4gICAgR1BHUFUucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKGNhbnZhc0VsKSB7XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIHZhciB3aWR0aCA9IGNhbnZhc0VsLmNsaWVudFdpZHRoO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gY2FudmFzRWwuY2xpZW50SGVpZ2h0O1xuICAgICAgICBnbC52aWV3cG9ydCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgLy8gU2V0IGNvcnJlY3QgY2FudmFzIHBpeGVsIHNpemUuXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XZWJHTF9BUEkvQnlfZXhhbXBsZS9DYW52YXNfc2l6ZV9hbmRfV2ViR0xcbiAgICAgICAgY2FudmFzRWwud2lkdGggPSB3aWR0aDtcbiAgICAgICAgY2FudmFzRWwuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAvLyBTYXZlIGRpbWVuc2lvbnMuXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfTtcbiAgICA7XG4gICAgR1BHUFUucHJvdG90eXBlLl9zdGVwID0gZnVuY3Rpb24gKHByb2dyYW1OYW1lLCBpbnB1dFRleHR1cmVzLCBvdXRwdXRUZXh0dXJlKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGdsID0gX2EuZ2wsIHByb2dyYW1zID0gX2EucHJvZ3JhbXMsIGZyYW1lYnVmZmVycyA9IF9hLmZyYW1lYnVmZmVycztcbiAgICAgICAgdmFyIHByb2dyYW0gPSBwcm9ncmFtc1twcm9ncmFtTmFtZV07XG4gICAgICAgIGlmICghcHJvZ3JhbSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwcm9ncmFtIG5hbWU6IFwiICsgcHJvZ3JhbU5hbWUgKyBcIi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtLnByb2dyYW0pO1xuICAgICAgICB2YXIgZnJhbWVidWZmZXIgPSBvdXRwdXRUZXh0dXJlID8gZnJhbWVidWZmZXJzW291dHB1dFRleHR1cmVdIDogbnVsbDtcbiAgICAgICAgaWYgKGZyYW1lYnVmZmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgb3V0cHV0IHRleHR1cmU6IFwiICsgb3V0cHV0VGV4dHVyZSArIFwiLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dFRleHR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwICsgaSk7XG4gICAgICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLnRleHR1cmVzW2lucHV0VGV4dHVyZXNbaV1dKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQb2ludCBhdHRyaWJ1dGUgdG8gdGhlIGN1cnJlbnRseSBib3VuZCBWQk8uXG4gICAgICAgIHZhciBwb3NpdGlvbkxvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbS5wcm9ncmFtLCAnYVBvc2l0aW9uJyk7XG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIocG9zaXRpb25Mb2NhdGlvbiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgLy8gRW5hYmxlIHRoZSBhdHRyaWJ1dGUuXG4gICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHBvc2l0aW9uTG9jYXRpb24pO1xuICAgIH07XG4gICAgO1xuICAgIC8vIFN0ZXAgZm9yIGVudGlyZSBmdWxsc2NyZWVuIHF1YWQuXG4gICAgR1BHUFUucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAocHJvZ3JhbU5hbWUsIGlucHV0VGV4dHVyZXMsIG91dHB1dFRleHR1cmUpIHtcbiAgICAgICAgaWYgKGlucHV0VGV4dHVyZXMgPT09IHZvaWQgMCkgeyBpbnB1dFRleHR1cmVzID0gW107IH1cbiAgICAgICAgdmFyIF9hID0gdGhpcywgZ2wgPSBfYS5nbCwgZXJyb3JTdGF0ZSA9IF9hLmVycm9yU3RhdGUsIHF1YWRQb3NpdGlvbnNCdWZmZXIgPSBfYS5xdWFkUG9zaXRpb25zQnVmZmVyO1xuICAgICAgICAvLyBJZ25vcmUgaWYgd2UgYXJlIGluIGVycm9yIHN0YXRlLlxuICAgICAgICBpZiAoZXJyb3JTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSB1bmlmb3JtcyBhbmQgYnVmZmVycy5cbiAgICAgICAgdGhpcy5zZXRQcm9ncmFtVW5pZm9ybShwcm9ncmFtTmFtZSwgJ3Vfc2NhbGUnLCBbMSwgMV0sICdGTE9BVCcpO1xuICAgICAgICB0aGlzLnNldFByb2dyYW1Vbmlmb3JtKHByb2dyYW1OYW1lLCAndV90cmFuc2xhdGlvbicsIFswLCAwXSwgJ0ZMT0FUJyk7XG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBxdWFkUG9zaXRpb25zQnVmZmVyKTtcbiAgICAgICAgdGhpcy5fc3RlcChwcm9ncmFtTmFtZSwgaW5wdXRUZXh0dXJlcywgb3V0cHV0VGV4dHVyZSk7XG4gICAgICAgIC8vIERyYXcuXG4gICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xuICAgIH07XG4gICAgLy8gU3RlcCBwcm9ncmFtIG9ubHkgZm9yIGEgc3RyaXAgb2YgcHggYWxvbmcgdGhlIGJvdW5kYXJ5LlxuICAgIEdQR1BVLnByb3RvdHlwZS5zdGVwQm91bmRhcnkgPSBmdW5jdGlvbiAocHJvZ3JhbU5hbWUsIGlucHV0VGV4dHVyZXMsIG91dHB1dFRleHR1cmUpIHtcbiAgICAgICAgaWYgKGlucHV0VGV4dHVyZXMgPT09IHZvaWQgMCkgeyBpbnB1dFRleHR1cmVzID0gW107IH1cbiAgICAgICAgdmFyIF9hID0gdGhpcywgZ2wgPSBfYS5nbCwgZXJyb3JTdGF0ZSA9IF9hLmVycm9yU3RhdGUsIGJvdW5kYXJ5UG9zaXRpb25zQnVmZmVyID0gX2EuYm91bmRhcnlQb3NpdGlvbnNCdWZmZXI7XG4gICAgICAgIC8vIElnbm9yZSBpZiB3ZSBhcmUgaW4gZXJyb3Igc3RhdGUuXG4gICAgICAgIGlmIChlcnJvclN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXBkYXRlIHVuaWZvcm1zIGFuZCBidWZmZXJzLlxuICAgICAgICB0aGlzLnNldFByb2dyYW1Vbmlmb3JtKHByb2dyYW1OYW1lLCAndV9zY2FsZScsIFsxLCAxXSwgJ0ZMT0FUJyk7XG4gICAgICAgIHRoaXMuc2V0UHJvZ3JhbVVuaWZvcm0ocHJvZ3JhbU5hbWUsICd1X3RyYW5zbGF0aW9uJywgWzAsIDBdLCAnRkxPQVQnKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGJvdW5kYXJ5UG9zaXRpb25zQnVmZmVyKTtcbiAgICAgICAgdGhpcy5fc3RlcChwcm9ncmFtTmFtZSwgaW5wdXRUZXh0dXJlcywgb3V0cHV0VGV4dHVyZSk7XG4gICAgICAgIC8vIERyYXcuXG4gICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuTElORV9MT09QLCAwLCA0KTsgLy8gRHJhdyB0byBmcmFtZWJ1ZmZlci5cbiAgICB9O1xuICAgIC8vIC8vIFN0ZXAgcHJvZ3JhbSBmb3IgYWxsIGJ1dCBhIHN0cmlwIG9mIHB4IGFsb25nIHRoZSBib3VuZGFyeS5cbiAgICAvLyBzdGVwTm9uQm91bmRhcnkoXG4gICAgLy8gXHRwcm9ncmFtTmFtZTogc3RyaW5nLFxuICAgIC8vIFx0aW5wdXRUZXh0dXJlczogc3RyaW5nW10gPSBbXSxcbiAgICAvLyBcdG91dHB1dFRleHR1cmU/OiBzdHJpbmcsIC8vIFVuZGVmaW5lZCByZW5kZXJzIHRvIHNjcmVlbi5cbiAgICAvLyApIHtcbiAgICAvLyBcdGNvbnN0IHsgZ2wsIGVycm9yU3RhdGUgfSA9IHRoaXM7XG4gICAgLy8gXHQvLyBJZ25vcmUgaWYgd2UgYXJlIGluIGVycm9yIHN0YXRlLlxuICAgIC8vIFx0aWYgKGVycm9yU3RhdGUpIHtcbiAgICAvLyBcdFx0cmV0dXJuO1xuICAgIC8vIFx0fVxuICAgIC8vIFx0dGhpcy5fc3RlcChwcm9ncmFtTmFtZSwgaW5wdXRUZXh0dXJlcywgb3V0cHV0VGV4dHVyZSk7XG4gICAgLy8gXHRnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCAwLCA0KTsvLyBEcmF3IHRvIGZyYW1lYnVmZmVyLlxuICAgIC8vIH1cbiAgICAvLyBTdGVwIHByb2dyYW0gb25seSBmb3IgYSBjaXJjdWxhciBzcG90LlxuICAgIEdQR1BVLnByb3RvdHlwZS5zdGVwQ2lyY2xlID0gZnVuY3Rpb24gKHByb2dyYW1OYW1lLCBwb3NpdGlvbiwgLy8gcG9zaXRpb24gaXMgaW4gc2NyZWVuIHNwYWNlIGNvb3Jkcy5cbiAgICByYWRpdXMsIC8vIHJhZGl1cyBpcyBpbiBweC5cbiAgICBpbnB1dFRleHR1cmVzLCBvdXRwdXRUZXh0dXJlKSB7XG4gICAgICAgIGlmIChpbnB1dFRleHR1cmVzID09PSB2b2lkIDApIHsgaW5wdXRUZXh0dXJlcyA9IFtdOyB9XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGdsID0gX2EuZ2wsIGVycm9yU3RhdGUgPSBfYS5lcnJvclN0YXRlLCBjaXJjbGVQb3NpdGlvbnNCdWZmZXIgPSBfYS5jaXJjbGVQb3NpdGlvbnNCdWZmZXIsIHdpZHRoID0gX2Eud2lkdGgsIGhlaWdodCA9IF9hLmhlaWdodDtcbiAgICAgICAgLy8gSWdub3JlIGlmIHdlIGFyZSBpbiBlcnJvciBzdGF0ZS5cbiAgICAgICAgaWYgKGVycm9yU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgdW5pZm9ybXMgYW5kIGJ1ZmZlcnMuXG4gICAgICAgIHRoaXMuc2V0UHJvZ3JhbVVuaWZvcm0ocHJvZ3JhbU5hbWUsICd1X3NjYWxlJywgW3JhZGl1cyAvIHdpZHRoLCByYWRpdXMgLyBoZWlnaHRdLCAnRkxPQVQnKTtcbiAgICAgICAgLy8gRmxpcCB5IGF4aXMuXG4gICAgICAgIHRoaXMuc2V0UHJvZ3JhbVVuaWZvcm0ocHJvZ3JhbU5hbWUsICd1X3RyYW5zbGF0aW9uJywgWzIgKiBwb3NpdGlvblswXSAvIHdpZHRoIC0gMSwgLTIgKiBwb3NpdGlvblsxXSAvIGhlaWdodCArIDFdLCAnRkxPQVQnKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGNpcmNsZVBvc2l0aW9uc0J1ZmZlcik7XG4gICAgICAgIHRoaXMuX3N0ZXAocHJvZ3JhbU5hbWUsIGlucHV0VGV4dHVyZXMsIG91dHB1dFRleHR1cmUpO1xuICAgICAgICAvLyBEcmF3LlxuICAgICAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX0ZBTiwgMCwgTlVNX1NFR01FTlRTX0NJUkNMRSArIDIpOyAvLyBEcmF3IHRvIGZyYW1lYnVmZmVyLlxuICAgIH07XG4gICAgR1BHUFUucHJvdG90eXBlLnN3YXBUZXh0dXJlcyA9IGZ1bmN0aW9uICh0ZXh0dXJlMU5hbWUsIHRleHR1cmUyTmFtZSkge1xuICAgICAgICB2YXIgdGVtcCA9IHRoaXMudGV4dHVyZXNbdGV4dHVyZTFOYW1lXTtcbiAgICAgICAgdGhpcy50ZXh0dXJlc1t0ZXh0dXJlMU5hbWVdID0gdGhpcy50ZXh0dXJlc1t0ZXh0dXJlMk5hbWVdO1xuICAgICAgICB0aGlzLnRleHR1cmVzW3RleHR1cmUyTmFtZV0gPSB0ZW1wO1xuICAgICAgICB0ZW1wID0gdGhpcy5mcmFtZWJ1ZmZlcnNbdGV4dHVyZTFOYW1lXTtcbiAgICAgICAgdGhpcy5mcmFtZWJ1ZmZlcnNbdGV4dHVyZTFOYW1lXSA9IHRoaXMuZnJhbWVidWZmZXJzW3RleHR1cmUyTmFtZV07XG4gICAgICAgIHRoaXMuZnJhbWVidWZmZXJzW3RleHR1cmUyTmFtZV0gPSB0ZW1wO1xuICAgIH07XG4gICAgO1xuICAgIC8vIHN3YXAzVGV4dHVyZXMoXG4gICAgLy8gXHR0ZXh0dXJlMU5hbWU6IHN0cmluZyxcbiAgICAvLyBcdHRleHR1cmUyTmFtZTogc3RyaW5nLFxuICAgIC8vIFx0dGV4dHVyZTNOYW1lOiBzdHJpbmcsXG4gICAgLy8gKSB7XG4gICAgLy8gICAgIGxldCB0ZW1wID0gdGhpcy50ZXh0dXJlc1t0ZXh0dXJlM05hbWVdO1xuICAgIC8vICAgICB0aGlzLnRleHR1cmVzW3RleHR1cmUzTmFtZV0gPSB0aGlzLnRleHR1cmVzW3RleHR1cmUyTmFtZV07XG4gICAgLy8gICAgIHRoaXMudGV4dHVyZXNbdGV4dHVyZTJOYW1lXSA9IHRoaXMudGV4dHVyZXNbdGV4dHVyZTFOYW1lXTtcbiAgICAvLyAgICAgdGhpcy50ZXh0dXJlc1t0ZXh0dXJlMU5hbWVdID0gdGVtcDtcbiAgICAvLyAgICAgdGVtcCA9IHRoaXMuZnJhbWVidWZmZXJzW3RleHR1cmUzTmFtZV07XG4gICAgLy8gICAgIHRoaXMuZnJhbWVidWZmZXJzW3RleHR1cmUzTmFtZV0gPSB0aGlzLmZyYW1lYnVmZmVyc1t0ZXh0dXJlMk5hbWVdO1xuICAgIC8vICAgICB0aGlzLmZyYW1lYnVmZmVyc1t0ZXh0dXJlMk5hbWVdID0gdGhpcy5mcmFtZWJ1ZmZlcnNbdGV4dHVyZTFOYW1lXTtcbiAgICAvLyAgICAgdGhpcy5mcmFtZWJ1ZmZlcnNbdGV4dHVyZTFOYW1lXSA9IHRlbXA7XG4gICAgLy8gfTtcbiAgICAvLyByZWFkeVRvUmVhZCgpIHtcbiAgICAvLyBcdGNvbnN0IHsgZ2wgfSA9IHRoaXM7XG4gICAgLy8gICAgIHJldHVybiBnbC5jaGVja0ZyYW1lYnVmZmVyU3RhdHVzKGdsLkZSQU1FQlVGRkVSKSA9PSBnbC5GUkFNRUJVRkZFUl9DT01QTEVURTtcbiAgICAvLyB9O1xuICAgIC8vIHJlYWRQaXhlbHMoeE1pbjogbnVtYmVyLCB5TWluOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBhcnJheTogVGV4dHVyZURhdGFUeXBlKSB7XG4gICAgLy8gXHRjb25zdCB7IGdsIH0gPSB0aGlzO1xuICAgIC8vIFx0Z2wucmVhZFBpeGVscyh4TWluLCB5TWluLCB3aWR0aCwgaGVpZ2h0LCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBhcnJheSk7XG4gICAgLy8gfTtcbiAgICBHUEdQVS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFRPRE86IG1ha2Ugc3VyZSB3ZSBhcmUgYWN0dWFsbHkgZGVhbGxvY2F0aW5nIHJlc291cmNlcyBoZXJlLlxuICAgICAgICB2YXIgX2EgPSB0aGlzLCBnbCA9IF9hLmdsLCBwcm9ncmFtcyA9IF9hLnByb2dyYW1zLCBmcmFtZWJ1ZmZlcnMgPSBfYS5mcmFtZWJ1ZmZlcnMsIHRleHR1cmVzID0gX2EudGV4dHVyZXMsIHNoYWRlcnMgPSBfYS5zaGFkZXJzLCBkZWZhdWx0VmVydGV4U2hhZGVyID0gX2EuZGVmYXVsdFZlcnRleFNoYWRlcjtcbiAgICAgICAgLy8gVW5iaW5kIGFsbCBkYXRhIGJlZm9yZSBkZWxldGluZy5cbiAgICAgICAgT2JqZWN0LmtleXMocHJvZ3JhbXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIHByb2dyYW0gPSBwcm9ncmFtc1trZXldLnByb2dyYW07XG4gICAgICAgICAgICBnbC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICAgICAgZGVsZXRlIHByb2dyYW1zW2tleV07XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3Qua2V5cyhmcmFtZWJ1ZmZlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIGZyYW1lYnVmZmVyID0gZnJhbWVidWZmZXJzW2tleV07XG4gICAgICAgICAgICBnbC5kZWxldGVGcmFtZWJ1ZmZlcihmcmFtZWJ1ZmZlcik7XG4gICAgICAgICAgICBkZWxldGUgZnJhbWVidWZmZXJzW2tleV07XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3Qua2V5cyh0ZXh0dXJlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgdGV4dHVyZSA9IHRleHR1cmVzW2tleV07XG4gICAgICAgICAgICBnbC5kZWxldGVUZXh0dXJlKHRleHR1cmUpO1xuICAgICAgICAgICAgZGVsZXRlIHRleHR1cmVzW2tleV07XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKHZhciBpID0gc2hhZGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKHNoYWRlcnNbaV0gPT09IGRlZmF1bHRWZXJ0ZXhTaGFkZXIpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYkdMUmVuZGVyaW5nQ29udGV4dC9kZWxldGVTaGFkZXJcbiAgICAgICAgICAgIC8vIFRoaXMgbWV0aG9kIGhhcyBubyBlZmZlY3QgaWYgdGhlIHNoYWRlciBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWRcbiAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcihzaGFkZXJzW2ldKTtcbiAgICAgICAgICAgIHNoYWRlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICA7XG4gICAgcmV0dXJuIEdQR1BVO1xufSgpKTtcbmV4cG9ydHMuR1BHUFUgPSBHUEdQVTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdQR1BVLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5JTlRfVFlQRSA9IGV4cG9ydHMuRkxPQVRfVFlQRSA9IGV4cG9ydHMuSU5UXzREX1VOSUZPUk0gPSBleHBvcnRzLklOVF8zRF9VTklGT1JNID0gZXhwb3J0cy5JTlRfMkRfVU5JRk9STSA9IGV4cG9ydHMuSU5UXzFEX1VOSUZPUk0gPSBleHBvcnRzLkZMT0FUXzREX1VOSUZPUk0gPSBleHBvcnRzLkZMT0FUXzNEX1VOSUZPUk0gPSBleHBvcnRzLkZMT0FUXzJEX1VOSUZPUk0gPSBleHBvcnRzLkZMT0FUXzFEX1VOSUZPUk0gPSB2b2lkIDA7XG5leHBvcnRzLkZMT0FUXzFEX1VOSUZPUk0gPSAnMWYnO1xuZXhwb3J0cy5GTE9BVF8yRF9VTklGT1JNID0gJzJmJztcbmV4cG9ydHMuRkxPQVRfM0RfVU5JRk9STSA9ICczZic7XG5leHBvcnRzLkZMT0FUXzREX1VOSUZPUk0gPSAnM2YnO1xuZXhwb3J0cy5JTlRfMURfVU5JRk9STSA9ICcxaSc7XG5leHBvcnRzLklOVF8yRF9VTklGT1JNID0gJzJpJztcbmV4cG9ydHMuSU5UXzNEX1VOSUZPUk0gPSAnM2knO1xuZXhwb3J0cy5JTlRfNERfVU5JRk9STSA9ICczaSc7XG5leHBvcnRzLkZMT0FUX1RZUEUgPSAnRkxPQVQnO1xuZXhwb3J0cy5JTlRfVFlQRSA9ICdJTlQnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnRzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5HUEdQVSA9IHZvaWQgMDtcbnZhciBHUEdQVV8xID0gcmVxdWlyZShcIi4vR1BHUFVcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJHUEdQVVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gR1BHUFVfMS5HUEdQVTsgfSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8gVmVydGV4IHNoYWRlciBmb3IgZnVsbHNjcmVlbiBxdWFkLlxuZXhwb3J0cy5kZWZhdWx0ID0gXCJcXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuYXR0cmlidXRlIHZlYzIgYVBvc2l0aW9uO1xcbnVuaWZvcm0gdmVjMiB1X3NjYWxlO1xcbnVuaWZvcm0gdmVjMiB1X3RyYW5zbGF0aW9uO1xcbnZhcnlpbmcgdmVjMiB1djtcXG52b2lkIG1haW4oKSB7XFxuXFx0Ly8gQ2FsY3VsYXRlIFVWIGNvb3JkaW5hdGVzIFswLCAxXS5cXG5cXHR1diA9IDAuNSAqIChhUG9zaXRpb24gKyAxLjApO1xcblxcdC8vIEFwcGx5IHRyYW5zZm9ybWF0aW9ucy5cXG5cXHR2ZWMyIHBvc2l0aW9uID0gdV9zY2FsZSAqIGFQb3NpdGlvbiArIHVfdHJhbnNsYXRpb247XFxuXFx0Ly8gQ2FsY3VsYXRlIHZlcnRleCBwb3NpdGlvbi5cXG5cXHRnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAsIDEpO1xcbn1cXG5cIjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZmF1bHRWZXJ0ZXhTaGFkZXIuanMubWFwIiwibW9kdWxlLmV4cG9ydHMgPSBcInByZWNpc2lvbiBsb3dwIGZsb2F0O1xcblxcbnZhcnlpbmcgdmVjMiB1djtcXG51bmlmb3JtIHNhbXBsZXIyRCB1X3N0YXRlO1xcbnVuaWZvcm0gdmVjMiB1X3B4U2l6ZTtcXG5cXG52b2lkIG1haW4oKSB7XFxuXFx0ZmxvYXQgY3VycmVudFN0YXRlID0gdGV4dHVyZTJEKHVfc3RhdGUsIHV2KS5yO1xcblxcblxcdGludCBjb3VudCA9IDA7XFxuXFx0Zm9yIChpbnQgaSA9IC0xOyBpIDwgMjsgaSsrKSB7XFxuXFx0XFx0Zm9yIChpbnQgaiA9LSAxOyBqIDwgMjsgaisrKSB7XFxuXFx0XFx0XFx0aWYgKGkgPT0gMCAmJiBqID09IDApIGNvbnRpbnVlO1xcblxcdFxcdFxcdHZlYzIgbmVpZ2hib3JVViA9IHV2ICsgdmVjMih1X3B4U2l6ZS54ICogZmxvYXQoaSksIHVfcHhTaXplLnkgKiBmbG9hdChqKSk7IC8vIFRPRE86IG5lZWQgZmxvYXQoKT9cXG5cXHRcXHRcXHRpZiAodGV4dHVyZTJEKHVfc3RhdGUsIG5laWdoYm9yVVYpLnIgPT0gMS4wKSBjb3VudCsrO1xcblxcdFxcdH1cXG5cXHR9XFxuXFxuXFx0Ly8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29ud2F5JTI3c19HYW1lX29mX0xpZmUjUnVsZXNcXG5cXHRpZiAoY291bnQgPT0gMyB8fCAoY3VycmVudFN0YXRlID09IDEuMCAmJiBjb3VudCA9PSAyKSkge1xcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoMSk7XFxuXFx0XFx0cmV0dXJuO1xcblxcdH1cXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KDAsIDAsIDAsMSk7XFxufVwiIiwibW9kdWxlLmV4cG9ydHMgPSBcInByZWNpc2lvbiBsb3dwIGZsb2F0O1xcblxcbnZhcnlpbmcgdmVjMiB1djtcXG51bmlmb3JtIHNhbXBsZXIyRCB1X25vaXNlTG9va3VwO1xcblxcbnZvaWQgbWFpbigpIHtcXG5cXHRmbG9hdCBzdGF0ZSA9IHRleHR1cmUyRCh1X25vaXNlTG9va3VwLCB1dikucjtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KHN0YXRlLCAwLCAwLCAxKTtcXG59XFxuXCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwicHJlY2lzaW9uIGxvd3AgZmxvYXQ7XFxuXFxudmFyeWluZyB2ZWMyIHV2O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVfc3RhdGU7XFxuXFxudm9pZCBtYWluKCkge1xcblxcdGZsb2F0IGN1cnJlbnRTdGF0ZSA9IHRleHR1cmUyRCh1X3N0YXRlLCB1dikucjtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KGN1cnJlbnRTdGF0ZSwgY3VycmVudFN0YXRlLCBjdXJyZW50U3RhdGUsIDEpO1xcbn1cIiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbl9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbi8vIFRoaXMgZW50cnkgbW9kdWxlIHVzZWQgJ2V4cG9ydHMnIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbiJdLCJzb3VyY2VSb290IjoiIn0=