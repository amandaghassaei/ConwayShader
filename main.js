(()=>{var e={607:(e,t,r)=>{"use strict";var n=r(561),i=r(645),o=r(539),a=r(950),s=document.getElementById("glcanvas"),u=new n.GPGPU(null,s);u.initProgram("gol",i,[{name:"u_state",value:0,dataType:"INT"},{name:"u_pxSize",value:[1/s.clientWidth,1/s.clientHeight],dataType:"FLOAT"}]),u.initProgram("render",o,[{name:"u_state",value:0,dataType:"INT"}]),u.initProgram("interaction",a,[{name:"u_noiseLookup",value:0,dataType:"INT"}]);function l(e){e.preventDefault();var t="scale(1)";document.body.style.webkitTransform=t,document.body.style.msTransform=t,document.body.style.transform=t}function f(e,t){void 0===t&&(t=.1);for(var r=new Uint8Array(e),n=0,i=r.length;n<i;n++)r[n]=Math.random()<t?255:0;return r}function c(){var e=s.clientWidth,t=s.clientHeight,r=f(e*t);u.initTexture("currentState",e,t,"uint8",1,!0,void 0,!0),u.initTexture("lastState",e,t,"uint8",1,!0,r,!0),u.setProgramUniform("gol","u_pxSize",[1/e,1/t],"FLOAT"),u.onResize(s)}u.initTexture("noiseLookup",20,20,"uint8",1,!1,f(400,.5)),window.onmousemove=function(e){u.stepCircle("interaction",[e.clientX,e.clientY],10,["noiseLookup"],"lastState")},window.ontouchmove=function(e){e.preventDefault();for(var t=0;t<e.touches.length;t++){var r=e.touches[t];u.stepCircle("interaction",[r.pageX,r.pageY],10,["noiseLookup"],"lastState")}},document.addEventListener("gesturestart",l),document.addEventListener("gesturechange",l),document.addEventListener("gestureend",l),window.addEventListener("resize",c),c(),window.requestAnimationFrame((function e(){u.step("gol",["lastState"],"currentState"),u.step("render",["currentState"]),u.swapTextures("currentState","lastState"),window.requestAnimationFrame(e)}))},576:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GPGPU=void 0;for(var n=r(416),i=r(647),o=new Float32Array([-1,-1,1,-1,-1,1,1,1]),a=new Float32Array([-1,-1,1,-1,1,1,-1,1]),s=[0,0],u=0;u<=20;u++)s.push(Math.cos(2*Math.PI*u/20),Math.sin(2*Math.PI*u/20));var l=new Float32Array(s),f=function(){function e(e,t,r){void 0===r&&(r=function(e){throw new Error(e)}),this.errorState=!1,this.programs={},this.textures={},this.framebuffers={},this.shaders=[];var i=this;if(this.errorCallback=function(e){i.errorState=!0,r&&r(e)},e||null!==(e=t.getContext("webgl2",{antialias:!1})||t.getContext("webgl",{antialias:!1}))){this.gl=e,e.HALF_FLOAT||this.loadExtension("OES_texture_half_float"),this.linearFilterEnabled=this.loadExtension("OES_texture_half_float_linear",!0),e.disable(e.DEPTH_TEST),e.pixelStorei(e.UNPACK_ALIGNMENT,1);var s=this.compileShader(n.default,e.VERTEX_SHADER);if(s){this.defaultVertexShader=s,this.quadPositionsBuffer=this.initVertexBuffer(o),this.boundaryPositionsBuffer=this.initVertexBuffer(a),this.circlePositionsBuffer=this.initVertexBuffer(l),e.bindBuffer(e.ARRAY_BUFFER,null),this.onResize(t);var u=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS);console.log(u+" textures max.")}else r("Unable to initialize fullscreen quad vertex shader.")}else r("Unable to initialize WebGL context.")}return e.prototype.initVertexBuffer=function(e){var t=this.errorCallback,r=this.gl,n=r.createBuffer();if(n)return r.bindBuffer(r.ARRAY_BUFFER,n),r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW),n;t("Unable to allocate gl buffer.")},e.prototype.loadExtension=function(e,t){var r;void 0===t&&(t=!1);try{r=this.gl.getExtension(e)}catch(e){}return r||console.warn("Unsupported "+(t?"optional ":"")+"extension: "+e+"."),r||t||this.errorCallback("Required extension unsupported by this device / browser: "+e+"."),!!r},e.prototype.compileShader=function(e,t){var r=this.gl,n=r.createShader(t);return n?(r.shaderSource(n,e),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS)?(this.shaders.push(n),n):(this.errorCallback("Could not compile "+(t===r.FRAGMENT_SHADER?"fragment":"vertex")+"\n\t\t\t\t shader: "+r.getShaderInfoLog(n)),null)):(this.errorCallback("Unable to init gl shader."),null)},e.prototype.initProgram=function(e,t,r){var n=this,i=this.programs,o=this.gl;if(i[e])return o.useProgram(i[e].program),void console.warn("Already a program with the name "+e+".");var a=this.compileShader(t,o.FRAGMENT_SHADER),s=this.defaultVertexShader;if(a&&s){var u=o.createProgram();u?(o.attachShader(u,s),o.attachShader(u,a),o.linkProgram(u),o.getProgramParameter(u,o.LINK_STATUS)||this.errorCallback("Program "+e+" filed to link: "+o.getProgramInfoLog(u)),i[e]={program:u,uniforms:{}},null==r||r.forEach((function(t){var r=t.name,i=t.value,o=t.dataType;n.setProgramUniform(e,r,i,o)}))):this.errorCallback("Unable to init gl program.")}else this.errorCallback("Unable to init shaders for program "+e+".")},e.prototype.uniformTypeForValue=function(e,t){if(t===i.FLOAT_TYPE){if(!isNaN(e)||1===e.length)return i.FLOAT_1D_UNIFORM;if(2===e.length)return i.FLOAT_2D_UNIFORM;if(3===e.length)return i.FLOAT_3D_UNIFORM;if(4===e.length)return i.FLOAT_4D_UNIFORM;throw new Error("Invalid uniform value: "+e)}if(t===i.INT_TYPE){if(!isNaN(e)||1===e.length)return i.INT_1D_UNIFORM;if(2===e.length)return i.INT_2D_UNIFORM;if(3===e.length)return i.INT_3D_UNIFORM;if(4===e.length)return i.INT_4D_UNIFORM;throw new Error("Invalid uniform value: "+e)}throw new Error("Invalid uniform data type: "+t)},e.prototype.setProgramUniform=function(e,t,r,n){var o=this.gl,a=this.programs[e];if(!a)throw new Error("Count not set uniform, no program of name: "+e+".");o.useProgram(a.program);var s=a.uniforms,u=this.uniformTypeForValue(r,n);if(!s[t]){var l=o.getUniformLocation(a.program,t);if(!l)return void this.errorCallback("Could not init uniform "+t+" for program "+e+".\nCheck that uniform is present in shader code, unused uniforms may be removed by compiler.\nAlso check that uniform type in shader code matches type "+u+".\nError code: "+o.getError()+".");s[t]={location:l,type:u}}var f=s[t];if(f.type!=u)throw new Error("Uniform "+t+" cannot change from type "+f.type+" to type "+u+".");var c=f.location;switch(u){case i.FLOAT_1D_UNIFORM:o.uniform1f(c,r);break;case i.FLOAT_2D_UNIFORM:o.uniform2fv(c,r);break;case i.FLOAT_3D_UNIFORM:o.uniform3fv(c,r);break;case i.FLOAT_4D_UNIFORM:o.uniform4fv(c,r);break;case i.INT_1D_UNIFORM:o.uniform1i(c,r);break;case i.INT_2D_UNIFORM:o.uniform2iv(c,r);break;case i.INT_3D_UNIFORM:o.uniform3iv(c,r);break;case i.INT_4D_UNIFORM:o.uniform4iv(c,r);break;default:throw new Error("Unknown uniform type: "+u+".")}},e.prototype.initFramebufferForTexture=function(e,t){void 0===t&&(t=!1);var r=this.gl,n=this.framebuffers;n[e]&&(t||console.warn("Already a framebuffer with the name "+e+", use shouldOverwrite flag in initTexture() to ignore."),r.deleteFramebuffer(n[e]));var i=this.textures[e];if(!i)throw new Error("Cannot init framebuffer, texture "+e+" does not exist.");var o=r.createFramebuffer();if(o){r.bindFramebuffer(r.FRAMEBUFFER,o),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0);var a=r.checkFramebufferStatus(r.FRAMEBUFFER);a!=r.FRAMEBUFFER_COMPLETE&&this.errorCallback("Invalid status for "+e+" framebuffer: "+a+"."),this.framebuffers[e]=o}else this.errorCallback("Could not init "+e+" framebuffer: "+r.getError()+".")},e.prototype.glTextureFormatForNumChannels=function(e){var t=this.gl;switch(e){case 1:case 2:case 3:return{glFormat:t.RGB,glNumChannels:3};case 4:return{glFormat:t.RGBA,glNumChannels:4}}},e.prototype.glTextureTypeForType=function(e){var t=this.gl;switch(e){case"float16":return t.HALF_FLOAT?t.HALF_FLOAT:t.HALF_FLOAT_OES;case"uint8":return t.UNSIGNED_BYTE}},e.prototype.initTexture=function(e,t,r,n,i,o,a,s){void 0===o&&(o=!1),void 0===s&&(s=!1);var u=this,l=u.gl,f=u.textures,c=u.framebuffers;if(f[e]&&(s||console.warn("Already a texture with the name "+e+", use shouldOverwrite flag to ignore."),l.deleteTexture(f[e])),a&&a.length!==t*r*i)throw new Error("Invalid data array of size "+a.length+" for texture of dimensions "+t+" x "+r+" x "+i+".");var h=l.createTexture();if(h){l.bindTexture(l.TEXTURE_2D,h),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);var m=l.NEAREST;l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,m),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,m);var _=this.glTextureFormatForNumChannels(i),d=_.glFormat,T=_.glNumChannels,p=this.glTextureTypeForType(n);if(a&&i!==T){var v=t*r,g=void 0;switch(n){case"uint8":g=new Uint8Array(t*r*T);break;default:throw new Error("Unsupported type "+n+" for initTexture.")}for(var F=0;F<v;F++)for(var E=0;E<i;E++)g[T*F+E]=a[F*i+E];a=g}l.texImage2D(l.TEXTURE_2D,0,d,t,r,0,d,p,a||null),f[e]=h,o?this.initFramebufferForTexture(e,s):s&&c[e]&&(l.deleteFramebuffer(c[e]),delete c[e])}else this.errorCallback("Could not init "+e+" texture: "+l.getError()+".")},e.prototype.onResize=function(e){var t=this.gl,r=e.clientWidth,n=e.clientHeight;t.viewport(0,0,r,n),e.width=r,e.height=n,this.width=r,this.height=n},e.prototype._step=function(e,t,r){var n=this,i=n.gl,o=n.programs,a=n.framebuffers,s=o[e];if(!s)throw new Error("Invalid program name: "+e+".");i.useProgram(s.program);var u=r?a[r]:null;if(void 0===u)throw new Error("Invalid output texture: "+r+".");i.bindFramebuffer(i.FRAMEBUFFER,u);for(var l=0;l<t.length;l++)i.activeTexture(i.TEXTURE0+l),i.bindTexture(i.TEXTURE_2D,this.textures[t[l]]);var f=i.getAttribLocation(s.program,"aPosition");i.vertexAttribPointer(f,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(f)},e.prototype.step=function(e,t,r){void 0===t&&(t=[]);var n=this,i=n.gl,o=n.errorState,a=n.quadPositionsBuffer;o||(this.setProgramUniform(e,"u_scale",[1,1],"FLOAT"),this.setProgramUniform(e,"u_translation",[0,0],"FLOAT"),i.bindBuffer(i.ARRAY_BUFFER,a),this._step(e,t,r),i.drawArrays(i.TRIANGLE_STRIP,0,4))},e.prototype.stepBoundary=function(e,t,r){void 0===t&&(t=[]);var n=this,i=n.gl,o=n.errorState,a=n.boundaryPositionsBuffer;o||(this.setProgramUniform(e,"u_scale",[1,1],"FLOAT"),this.setProgramUniform(e,"u_translation",[0,0],"FLOAT"),i.bindBuffer(i.ARRAY_BUFFER,a),this._step(e,t,r),i.drawArrays(i.LINE_LOOP,0,4))},e.prototype.stepCircle=function(e,t,r,n,i){void 0===n&&(n=[]);var o=this,a=o.gl,s=o.errorState,u=o.circlePositionsBuffer,l=o.width,f=o.height;s||(this.setProgramUniform(e,"u_scale",[r/l,r/f],"FLOAT"),this.setProgramUniform(e,"u_translation",[2*t[0]/l-1,-2*t[1]/f+1],"FLOAT"),a.bindBuffer(a.ARRAY_BUFFER,u),this._step(e,n,i),a.drawArrays(a.TRIANGLE_FAN,0,22))},e.prototype.swapTextures=function(e,t){var r=this.textures[e];this.textures[e]=this.textures[t],this.textures[t]=r,r=this.framebuffers[e],this.framebuffers[e]=this.framebuffers[t],this.framebuffers[t]=r},e.prototype.reset=function(){var e=this,t=e.gl,r=e.programs,n=e.framebuffers,i=e.textures,o=e.shaders,a=e.defaultVertexShader;Object.keys(r).forEach((function(e){var n=r[e].program;t.deleteProgram(n),delete r[e]})),Object.keys(n).forEach((function(e){var r=n[e];t.deleteFramebuffer(r),delete n[e]})),Object.keys(i).forEach((function(e){var r=i[e];t.deleteTexture(r),delete i[e]}));for(var s=o.length-1;s>=0;s--)o[s]!==a&&(t.deleteShader(o[s]),o.splice(s,1))},e}();t.GPGPU=f},647:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INT_TYPE=t.FLOAT_TYPE=t.INT_4D_UNIFORM=t.INT_3D_UNIFORM=t.INT_2D_UNIFORM=t.INT_1D_UNIFORM=t.FLOAT_4D_UNIFORM=t.FLOAT_3D_UNIFORM=t.FLOAT_2D_UNIFORM=t.FLOAT_1D_UNIFORM=void 0,t.FLOAT_1D_UNIFORM="1f",t.FLOAT_2D_UNIFORM="2f",t.FLOAT_3D_UNIFORM="3f",t.FLOAT_4D_UNIFORM="3f",t.INT_1D_UNIFORM="1i",t.INT_2D_UNIFORM="2i",t.INT_3D_UNIFORM="3i",t.INT_4D_UNIFORM="3i",t.FLOAT_TYPE="FLOAT",t.INT_TYPE="INT"},561:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GPGPU=void 0;var n=r(576);Object.defineProperty(t,"GPGPU",{enumerable:!0,get:function(){return n.GPGPU}})},416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="\nprecision highp float;\nattribute vec2 aPosition;\nuniform vec2 u_scale;\nuniform vec2 u_translation;\nvarying vec2 uv;\nvoid main() {\n\t// Calculate UV coordinates [0, 1].\n\tuv = 0.5 * (aPosition + 1.0);\n\t// Apply transformations.\n\tvec2 position = u_scale * aPosition + u_translation;\n\t// Calculate vertex position.\n\tgl_Position = vec4(position, 0, 1);\n}\n"},645:e=>{e.exports="precision lowp float;\n\nvarying vec2 uv;\nuniform sampler2D u_state;\nuniform vec2 u_pxSize;\n\nvoid main() {\n\tfloat currentState = texture2D(u_state, uv).r;\n\n\tint count = 0;\n\tfor (int i = -1; i < 2; i++) {\n\t\tfor (int j =- 1; j < 2; j++) {\n\t\t\tif (i == 0 && j == 0) continue;\n\t\t\tvec2 neighborUV = uv + vec2(u_pxSize.x * float(i), u_pxSize.y * float(j));\n\t\t\tif (texture2D(u_state, neighborUV).r == 1.0) count++;\n\t\t}\n\t}\n\n\t// https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life#Rules\n\tif (count == 3 || (currentState == 1.0 && count == 2)) {\n\t\tgl_FragColor = vec4(1);\n\t\treturn;\n\t}\n\tgl_FragColor = vec4(0, 0, 0,1);\n}"},950:e=>{e.exports="precision lowp float;\n\nvarying vec2 uv;\nuniform sampler2D u_noiseLookup;\n\nvoid main() {\n\tfloat state = texture2D(u_noiseLookup, uv).r;\n\tgl_FragColor = vec4(state, 0, 0, 1);\n}\n"},539:e=>{e.exports="precision lowp float;\n\nvarying vec2 uv;\nuniform sampler2D u_state;\n\nvoid main() {\n\tfloat currentState = texture2D(u_state, uv).r;\n\tgl_FragColor = vec4(currentState, currentState, currentState, 1);\n}"}},t={};!function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb253YXlzaGFkZXIvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vY29ud2F5c2hhZGVyLy4vbm9kZV9tb2R1bGVzL3dlYmdsLWdwZ3B1L2Rpc3QvR1BHUFUuanMiLCJ3ZWJwYWNrOi8vY29ud2F5c2hhZGVyLy4vbm9kZV9tb2R1bGVzL3dlYmdsLWdwZ3B1L2Rpc3QvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2NvbndheXNoYWRlci8uL25vZGVfbW9kdWxlcy93ZWJnbC1ncGdwdS9kaXN0L2luZGV4LmpzIiwid2VicGFjazovL2NvbndheXNoYWRlci8uL25vZGVfbW9kdWxlcy93ZWJnbC1ncGdwdS9kaXN0L2tlcm5lbHMvRGVmYXVsdFZlcnRleFNoYWRlci5qcyIsIndlYnBhY2s6Ly9jb253YXlzaGFkZXIvLi9zcmMva2VybmVscy9HT0xTaGFkZXIuZ2xzbCIsIndlYnBhY2s6Ly9jb253YXlzaGFkZXIvLi9zcmMva2VybmVscy9JbnRlcmFjdGlvblNoYWRlci5nbHNsIiwid2VicGFjazovL2NvbndheXNoYWRlci8uL3NyYy9rZXJuZWxzL1JlbmRlclNoYWRlci5nbHNsIiwid2VicGFjazovL2NvbndheXNoYWRlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jb253YXlzaGFkZXIvd2VicGFjay9zdGFydHVwIl0sIm5hbWVzIjpbImdvbFNoYWRlclNvdXJjZSIsInJlbmRlclNoYWRlclNvdXJjZSIsImludGVyYWN0aW9uU2hhZGVyU291cmNlIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdwZ3B1IiwiR1BHUFUiLCJpbml0UHJvZ3JhbSIsIm5hbWUiLCJ2YWx1ZSIsImRhdGFUeXBlIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJkaXNhYmxlWm9vbSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNjYWxlIiwiYm9keSIsInN0eWxlIiwid2Via2l0VHJhbnNmb3JtIiwibXNUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm0iLCJtYWtlUmFuZG9tQXJyYXkiLCJsZW5ndGgiLCJwcm9iYWJpbGl0eSIsImFycmF5IiwiVWludDhBcnJheSIsImkiLCJNYXRoIiwicmFuZG9tIiwib25SZXNpemUiLCJ3aWR0aCIsImhlaWdodCIsImRhdGEiLCJpbml0VGV4dHVyZSIsInVuZGVmaW5lZCIsInNldFByb2dyYW1Vbmlmb3JtIiwiVE9VQ0hfUkFESVVTIiwid2luZG93Iiwib25tb3VzZW1vdmUiLCJzdGVwQ2lyY2xlIiwiY2xpZW50WCIsImNsaWVudFkiLCJvbnRvdWNobW92ZSIsInRvdWNoZXMiLCJ0b3VjaCIsInBhZ2VYIiwicGFnZVkiLCJhZGRFdmVudExpc3RlbmVyIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic3RlcCIsInN3YXBUZXh0dXJlcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsIkRlZmF1bHRWZXJ0ZXhTaGFkZXJfMSIsImNvbnN0YW50c18xIiwiZnNRdWFkUG9zaXRpb25zIiwiRmxvYXQzMkFycmF5IiwiYm91bmRhcnlQb3NpdGlvbnMiLCJ1bml0Q2lyY2xlUG9pbnRzIiwicHVzaCIsImNvcyIsIlBJIiwic2luIiwiY2lyY2xlUG9zaXRpb25zIiwiZ2wiLCJjYW52YXNFbCIsImVycm9yQ2FsbGJhY2siLCJtZXNzYWdlIiwiRXJyb3IiLCJ0aGlzIiwiZXJyb3JTdGF0ZSIsInByb2dyYW1zIiwidGV4dHVyZXMiLCJmcmFtZWJ1ZmZlcnMiLCJzaGFkZXJzIiwic2VsZiIsImdldENvbnRleHQiLCJhbnRpYWxpYXMiLCJIQUxGX0ZMT0FUIiwibG9hZEV4dGVuc2lvbiIsImxpbmVhckZpbHRlckVuYWJsZWQiLCJkaXNhYmxlIiwiREVQVEhfVEVTVCIsInBpeGVsU3RvcmVpIiwiVU5QQUNLX0FMSUdOTUVOVCIsImRlZmF1bHRWZXJ0ZXhTaGFkZXIiLCJjb21waWxlU2hhZGVyIiwiZGVmYXVsdCIsIlZFUlRFWF9TSEFERVIiLCJxdWFkUG9zaXRpb25zQnVmZmVyIiwiaW5pdFZlcnRleEJ1ZmZlciIsImJvdW5kYXJ5UG9zaXRpb25zQnVmZmVyIiwiY2lyY2xlUG9zaXRpb25zQnVmZmVyIiwiYmluZEJ1ZmZlciIsIkFSUkFZX0JVRkZFUiIsIm1heFRleHR1cmVzSW5GcmFnbWVudFNoYWRlciIsImdldFBhcmFtZXRlciIsIk1BWF9URVhUVVJFX0lNQUdFX1VOSVRTIiwiY29uc29sZSIsImxvZyIsInByb3RvdHlwZSIsImJ1ZmZlciIsImNyZWF0ZUJ1ZmZlciIsImJ1ZmZlckRhdGEiLCJTVEFUSUNfRFJBVyIsImV4dGVuc2lvbiIsIm9wdGlvbmFsIiwiZXh0IiwiZ2V0RXh0ZW5zaW9uIiwid2FybiIsInNoYWRlclNvdXJjZSIsInNoYWRlclR5cGUiLCJzaGFkZXIiLCJjcmVhdGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsIkZSQUdNRU5UX1NIQURFUiIsImdldFNoYWRlckluZm9Mb2ciLCJwcm9ncmFtTmFtZSIsImZyYWdtZW50U2hhZGVyU291cmNlIiwidW5pZm9ybXMiLCJfdGhpcyIsInVzZVByb2dyYW0iLCJwcm9ncmFtIiwiZnJhZ21lbnRTaGFkZXIiLCJ2ZXJ0ZXhTaGFkZXIiLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJnZXRQcm9ncmFtUGFyYW1ldGVyIiwiTElOS19TVEFUVVMiLCJnZXRQcm9ncmFtSW5mb0xvZyIsImZvckVhY2giLCJ1bmlmb3JtIiwidW5pZm9ybVR5cGVGb3JWYWx1ZSIsIkZMT0FUX1RZUEUiLCJpc05hTiIsIkZMT0FUXzFEX1VOSUZPUk0iLCJGTE9BVF8yRF9VTklGT1JNIiwiRkxPQVRfM0RfVU5JRk9STSIsIkZMT0FUXzREX1VOSUZPUk0iLCJJTlRfVFlQRSIsIklOVF8xRF9VTklGT1JNIiwiSU5UXzJEX1VOSUZPUk0iLCJJTlRfM0RfVU5JRk9STSIsIklOVF80RF9VTklGT1JNIiwidW5pZm9ybU5hbWUiLCJ0eXBlIiwibG9jYXRpb25fMSIsImdldFVuaWZvcm1Mb2NhdGlvbiIsImdldEVycm9yIiwibG9jYXRpb24iLCJ1bmlmb3JtMWYiLCJ1bmlmb3JtMmZ2IiwidW5pZm9ybTNmdiIsInVuaWZvcm00ZnYiLCJ1bmlmb3JtMWkiLCJ1bmlmb3JtMml2IiwidW5pZm9ybTNpdiIsInVuaWZvcm00aXYiLCJpbml0RnJhbWVidWZmZXJGb3JUZXh0dXJlIiwidGV4dHVyZU5hbWUiLCJzaG91bGRPdmVyd3JpdGUiLCJkZWxldGVGcmFtZWJ1ZmZlciIsInRleHR1cmUiLCJmcmFtZWJ1ZmZlciIsImNyZWF0ZUZyYW1lYnVmZmVyIiwiYmluZEZyYW1lYnVmZmVyIiwiRlJBTUVCVUZGRVIiLCJmcmFtZWJ1ZmZlclRleHR1cmUyRCIsIkNPTE9SX0FUVEFDSE1FTlQwIiwiVEVYVFVSRV8yRCIsInN0YXR1cyIsImNoZWNrRnJhbWVidWZmZXJTdGF0dXMiLCJGUkFNRUJVRkZFUl9DT01QTEVURSIsImdsVGV4dHVyZUZvcm1hdEZvck51bUNoYW5uZWxzIiwibnVtQ2hhbm5lbHMiLCJnbEZvcm1hdCIsIlJHQiIsImdsTnVtQ2hhbm5lbHMiLCJSR0JBIiwiZ2xUZXh0dXJlVHlwZUZvclR5cGUiLCJIQUxGX0ZMT0FUX09FUyIsIlVOU0lHTkVEX0JZVEUiLCJ3cml0YWJsZSIsIl9hIiwiZGVsZXRlVGV4dHVyZSIsImNyZWF0ZVRleHR1cmUiLCJiaW5kVGV4dHVyZSIsInRleFBhcmFtZXRlcmkiLCJURVhUVVJFX1dSQVBfUyIsIkNMQU1QX1RPX0VER0UiLCJURVhUVVJFX1dSQVBfVCIsImZpbHRlciIsIk5FQVJFU1QiLCJURVhUVVJFX01JTl9GSUxURVIiLCJURVhUVVJFX01BR19GSUxURVIiLCJfYiIsImdsVHlwZSIsImltYWdlU2l6ZSIsIm5ld0FycmF5IiwiaiIsInRleEltYWdlMkQiLCJ2aWV3cG9ydCIsIl9zdGVwIiwiaW5wdXRUZXh0dXJlcyIsIm91dHB1dFRleHR1cmUiLCJhY3RpdmVUZXh0dXJlIiwiVEVYVFVSRTAiLCJwb3NpdGlvbkxvY2F0aW9uIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsImRyYXdBcnJheXMiLCJUUklBTkdMRV9TVFJJUCIsInN0ZXBCb3VuZGFyeSIsIkxJTkVfTE9PUCIsInBvc2l0aW9uIiwicmFkaXVzIiwiVFJJQU5HTEVfRkFOIiwiTlVNX1NFR01FTlRTX0NJUkNMRSIsInRleHR1cmUxTmFtZSIsInRleHR1cmUyTmFtZSIsInRlbXAiLCJyZXNldCIsImtleXMiLCJrZXkiLCJkZWxldGVQcm9ncmFtIiwiZGVsZXRlU2hhZGVyIiwic3BsaWNlIiwiR1BHUFVfMSIsImVudW1lcmFibGUiLCJnZXQiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIl0sIm1hcHBpbmdzIjoid0NBQUEsYUFDTUEsRUFBa0IsRUFBUSxLQUMxQkMsRUFBcUIsRUFBUSxLQUM3QkMsRUFBMEIsRUFBUSxLQUVsQ0MsRUFBU0MsU0FBU0MsZUFBZSxZQUNqQ0MsRUFBUSxJQUFJLEVBQUFDLE1BQU0sS0FBTUosR0FFOUJHLEVBQU1FLFlBQVksTUFBT1IsRUFBaUIsQ0FDekMsQ0FDQ1MsS0FBTSxVQUNOQyxNQUFPLEVBQ1BDLFNBQVUsT0FFWCxDQUNDRixLQUFNLFdBQ05DLE1BQU8sQ0FBQyxFQUFJUCxFQUFPUyxZQUFhLEVBQUlULEVBQU9VLGNBQzNDRixTQUFVLFdBR1pMLEVBQU1FLFlBQVksU0FBVVAsRUFBb0IsQ0FDL0MsQ0FDQ1EsS0FBTSxVQUNOQyxNQUFPLEVBQ1BDLFNBQVUsU0FHWkwsRUFBTUUsWUFBWSxjQUFlTixFQUF5QixDQUN6RCxDQUNDTyxLQUFNLGdCQUNOQyxNQUFPLEVBQ1BDLFNBQVUsU0E4QlosU0FBU0csRUFBWUMsR0FDcEJBLEVBQUVDLGlCQUNGLElBQU1DLEVBQVEsV0FFZGIsU0FBU2MsS0FBS0MsTUFBTUMsZ0JBQW1CSCxFQUV2Q2IsU0FBU2MsS0FBS0MsTUFBTUUsWUFBZ0JK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dEwsUUFBVSxxcEIsUUNBakJzTCxFQUFPdEwsUUFBVSw4TCxRQ0FqQnNMLEVBQU90TCxRQUFVLHFOQ0NidUwsRUFBMkIsSUFHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLEdBQUdGLEVBQXlCRSxHQUMzQixPQUFPRixFQUF5QkUsR0FBVXpMLFFBRzNDLElBQUlzTCxFQUFTQyxFQUF5QkUsR0FBWSxDQUdqRHpMLFFBQVMsSUFPVixPQUhBMEwsRUFBb0JELEdBQVVILEVBQVFBLEVBQU90TCxRQUFTd0wsR0FHL0NGLEVBQU90TCxRQ2xCZndMLENBQW9CLE0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdQR1BVIH0gZnJvbSAnd2ViZ2wtZ3BncHUnO1xuY29uc3QgZ29sU2hhZGVyU291cmNlID0gcmVxdWlyZSgnLi9rZXJuZWxzL0dPTFNoYWRlci5nbHNsJyk7XG5jb25zdCByZW5kZXJTaGFkZXJTb3VyY2UgPSByZXF1aXJlKCcuL2tlcm5lbHMvUmVuZGVyU2hhZGVyLmdsc2wnKTtcbmNvbnN0IGludGVyYWN0aW9uU2hhZGVyU291cmNlID0gcmVxdWlyZSgnLi9rZXJuZWxzL0ludGVyYWN0aW9uU2hhZGVyLmdsc2wnKTtcblxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dsY2FudmFzJykgIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuY29uc3QgZ3BncHUgPSBuZXcgR1BHUFUobnVsbCwgY2FudmFzKTtcblxuZ3BncHUuaW5pdFByb2dyYW0oJ2dvbCcsIGdvbFNoYWRlclNvdXJjZSwgW1xuXHR7XG5cdFx0bmFtZTogJ3Vfc3RhdGUnLFxuXHRcdHZhbHVlOiAwLFxuXHRcdGRhdGFUeXBlOiAnSU5UJyxcblx0fSxcblx0e1xuXHRcdG5hbWU6ICd1X3B4U2l6ZScsXG5cdFx0dmFsdWU6IFsxIC8gY2FudmFzLmNsaWVudFdpZHRoLCAxIC8gY2FudmFzLmNsaWVudEhlaWdodF0sXG5cdFx0ZGF0YVR5cGU6ICdGTE9BVCcsXG5cdH0sXG5dKTtcbmdwZ3B1LmluaXRQcm9ncmFtKCdyZW5kZXInLCByZW5kZXJTaGFkZXJTb3VyY2UsIFtcblx0e1xuXHRcdG5hbWU6ICd1X3N0YXRlJyxcblx0XHR2YWx1ZTogMCxcblx0XHRkYXRhVHlwZTogJ0lOVCcsXG5cdH0sXG5dKTtcbmdwZ3B1LmluaXRQcm9ncmFtKCdpbnRlcmFjdGlvbicsIGludGVyYWN0aW9uU2hhZGVyU291cmNlLCBbXG5cdHtcblx0XHRuYW1lOiAndV9ub2lzZUxvb2t1cCcsXG5cdFx0dmFsdWU6IDAsXG5cdFx0ZGF0YVR5cGU6ICdJTlQnLFxuXHR9LFxuXSk7XG5cbi8vIFNldCB1cCBpbnRlcmFjdGlvbnMuXG5jb25zdCBUT1VDSF9SQURJVVMgPSAxMDtcbi8vIENyZWF0ZSBhIGxvb2t1cCB0ZXh0dXJlIGZvciBhZGRpbmcgbm9pc2Ugb24gaW50ZXJhY3Rpb24uXG5ncGdwdS5pbml0VGV4dHVyZShcblx0J25vaXNlTG9va3VwJyxcblx0VE9VQ0hfUkFESVVTICogMixcblx0VE9VQ0hfUkFESVVTICogMixcblx0J3VpbnQ4Jyxcblx0MSxcblx0ZmFsc2UsXG5cdG1ha2VSYW5kb21BcnJheSg0ICogVE9VQ0hfUkFESVVTICogVE9VQ0hfUkFESVVTLCAwLjUpLFxuKTtcbndpbmRvdy5vbm1vdXNlbW92ZSA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG5cdGdwZ3B1LnN0ZXBDaXJjbGUoJ2ludGVyYWN0aW9uJywgW2UuY2xpZW50WCwgZS5jbGllbnRZXSwgVE9VQ0hfUkFESVVTLCBbJ25vaXNlTG9va3VwJ10sICdsYXN0U3RhdGUnKTtcbn07XG53aW5kb3cub250b3VjaG1vdmUgPSAoZTogVG91Y2hFdmVudCkgPT4ge1xuXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgZS50b3VjaGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y29uc3QgdG91Y2ggPSBlLnRvdWNoZXNbaV07XG5cdFx0Z3BncHUuc3RlcENpcmNsZSgnaW50ZXJhY3Rpb24nLCBbdG91Y2gucGFnZVgsIHRvdWNoLnBhZ2VZXSwgVE9VQ0hfUkFESVVTLCBbJ25vaXNlTG9va3VwJ10sICdsYXN0U3RhdGUnKTtcblx0fVxufTtcbi8vIERpc2FibGUgb3RoZXIgZ2VzdHVyZXMuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdnZXN0dXJlc3RhcnQnLCBkaXNhYmxlWm9vbSk7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdnZXN0dXJlY2hhbmdlJywgZGlzYWJsZVpvb20pOyBcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2dlc3R1cmVlbmQnLCBkaXNhYmxlWm9vbSk7XG5mdW5jdGlvbiBkaXNhYmxlWm9vbShlOiBFdmVudCkge1xuXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdGNvbnN0IHNjYWxlID0gJ3NjYWxlKDEpJztcblx0Ly8gQHRzLWlnbm9yZVxuXHRkb2N1bWVudC5ib2R5LnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9ICBzY2FsZTsgICAgLy8gQ2hyb21lLCBPcGVyYSwgU2FmYXJpXG5cdC8vIEB0cy1pZ25vcmVcblx0ZG9jdW1lbnQuYm9keS5zdHlsZS5tc1RyYW5zZm9ybSA9ICAgc2NhbGU7ICAgICAgIC8vIElFIDlcblx0ZG9jdW1lbnQuYm9keS5zdHlsZS50cmFuc2Zvcm0gPSBzY2FsZTtcbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uUmVzaXplKTtcbm9uUmVzaXplKCk7XG53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuXG4vLyBNYWtlIGEgcmFuZG9tIGFycmF5IG9mIDEncyBhbmQgMCdzLlxuZnVuY3Rpb24gbWFrZVJhbmRvbUFycmF5KGxlbmd0aDogbnVtYmVyLCBwcm9iYWJpbGl0eSA9IDAuMSkge1xuXHRjb25zdCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG5cdGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBhcnJheS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdGFycmF5W2ldID0gTWF0aC5yYW5kb20oKSA8IHByb2JhYmlsaXR5ID8gMjU1IDogMDtcblx0fVxuXHRyZXR1cm4gYXJyYXk7XG59XG5cbmZ1bmN0aW9uIG9uUmVzaXplKCkge1xuXHQvLyBSZS1pbml0IHRleHR1cmVzIGF0IG5ldyBzaXplLlxuXHRjb25zdCB3aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcblx0Y29uc3QgaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDtcblx0Y29uc3QgZGF0YSA9IG1ha2VSYW5kb21BcnJheSh3aWR0aCAqIGhlaWdodCk7XG5cdGdwZ3B1LmluaXRUZXh0dXJlKCdjdXJyZW50U3RhdGUnLCB3aWR0aCwgaGVpZ2h0LCAndWludDgnLCAxLCB0cnVlLCB1bmRlZmluZWQsIHRydWUpO1xuXHRncGdwdS5pbml0VGV4dHVyZSgnbGFzdFN0YXRlJywgd2lkdGgsIGhlaWdodCwgJ3VpbnQ4JywgMSwgdHJ1ZSwgZGF0YSwgdHJ1ZSk7XG5cdGdwZ3B1LnNldFByb2dyYW1Vbmlmb3JtKCdnb2wnLCAndV9weFNpemUnLCBbMSAvIHdpZHRoLCAxIC8gaGVpZ2h0XSwgJ0ZMT0FUJyk7XG5cdGdwZ3B1Lm9uUmVzaXplKGNhbnZhcyk7XG59XG5cbmZ1bmN0aW9uIHN0ZXAoKSB7XG5cdC8vIENvbXB1dGUgcnVsZXMuXG5cdGdwZ3B1LnN0ZXAoJ2dvbCcsIFsnbGFzdFN0YXRlJ10sICdjdXJyZW50U3RhdGUnKTtcblx0Ly8gUmVuZGVyIGN1cnJlbnQgc3RhdGUuXG5cdGdwZ3B1LnN0ZXAoJ3JlbmRlcicsIFsnY3VycmVudFN0YXRlJ10pO1xuXHQvLyBUb2dnbGUgdGV4dHVyZXMuXG5cdGdwZ3B1LnN3YXBUZXh0dXJlcygnY3VycmVudFN0YXRlJywgJ2xhc3RTdGF0ZScpO1xuXHQvLyBTdGFydCBhIG5ldyByZW5kZXIgY3ljbGUuXG5cdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkdQR1BVID0gdm9pZCAwO1xudmFyIERlZmF1bHRWZXJ0ZXhTaGFkZXJfMSA9IHJlcXVpcmUoXCIuL2tlcm5lbHMvRGVmYXVsdFZlcnRleFNoYWRlclwiKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbnZhciBmc1F1YWRQb3NpdGlvbnMgPSBuZXcgRmxvYXQzMkFycmF5KFstMSwgLTEsIDEsIC0xLCAtMSwgMSwgMSwgMV0pO1xudmFyIGJvdW5kYXJ5UG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShbLTEsIC0xLCAxLCAtMSwgMSwgMSwgLTEsIDFdKTtcbnZhciB1bml0Q2lyY2xlUG9pbnRzID0gWzAsIDBdO1xudmFyIE5VTV9TRUdNRU5UU19DSVJDTEUgPSAyMDtcbmZvciAodmFyIGkgPSAwOyBpIDw9IE5VTV9TRUdNRU5UU19DSVJDTEU7IGkrKykge1xuICAgIHVuaXRDaXJjbGVQb2ludHMucHVzaChNYXRoLmNvcygyICogTWF0aC5QSSAqIGkgLyBOVU1fU0VHTUVOVFNfQ0lSQ0xFKSwgTWF0aC5zaW4oMiAqIE1hdGguUEkgKiBpIC8gTlVNX1NFR01FTlRTX0NJUkNMRSkpO1xufVxudmFyIGNpcmNsZVBvc2l0aW9ucyA9IG5ldyBGbG9hdDMyQXJyYXkodW5pdENpcmNsZVBvaW50cyk7XG4vLyBTdG9yZSBleHRlbnNpb25zIGFzIGNvbnN0YW50cy5cbnZhciBPRVNfVEVYVFVSRV9IQUxGX0ZMT0FUID0gJ09FU190ZXh0dXJlX2hhbGZfZmxvYXQnO1xudmFyIE9FU19URVhUVVJFX0hBbEZfRkxPQVRfTElORUFSID0gJ09FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyJztcbnZhciBHUEdQVSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHUEdQVShnbCwgY2FudmFzRWwsIFxuICAgIC8vIE9wdGlvbmFsbHkgcGFzcyBpbiBhbiBlcnJvciBjYWxsYmFjayBpbiBjYXNlIHdlIHdhbnQgdG8gaGFuZGxlIGVycm9ycyByZWxhdGVkIHRvIHdlYmdsIHN1cHBvcnQuXG4gICAgLy8gZS5nLiB0aHJvdyB1cCBhIG1vZGFsIHRlbGxpbmcgdXNlciB0aGlzIHdpbGwgbm90IHdvcmsgb24gdGhlaXIgZGV2aWNlLlxuICAgIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGVycm9yQ2FsbGJhY2sgPT09IHZvaWQgMCkgeyBlcnJvckNhbGxiYWNrID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHsgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpOyB9OyB9XG4gICAgICAgIHRoaXMuZXJyb3JTdGF0ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByb2dyYW1zID0ge307IC8vIEFsbCBjdXJyZW50IGdsIHByb2dyYW1zLlxuICAgICAgICB0aGlzLnRleHR1cmVzID0ge307IC8vIEFsbCBjdXJyZW50IGdsIHRleHR1cmVzLlxuICAgICAgICB0aGlzLmZyYW1lYnVmZmVycyA9IHt9OyAvLyBBbGwgY3VycmVudCBnbCBmcmFtZWJ1ZmZlcnMuXG4gICAgICAgIHRoaXMuc2hhZGVycyA9IFtdOyAvLyBLZWVwIHRyYWNrIG9mIGFsbCBzaGFkZXJzIGluaXRlZCBzbyB0aGV5IGNhbiBiZSBwcm9wZXJseSBkZWFsbG9jYXRlZC5cbiAgICAgICAgLy8gU2F2ZSBjYWxsYmFjayBpbiBjYXNlIHdlIHJ1biBpbnRvIGFuIGVycm9yLlxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICBzZWxmLmVycm9yU3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGVycm9yQ2FsbGJhY2spXG4gICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayhtZXNzYWdlKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gSW5pdCBHTC5cbiAgICAgICAgaWYgKCFnbCkge1xuICAgICAgICAgICAgLy8gSW5pdCBhIGdsIGNvbnRleHQgaWYgbm90IHBhc3NlZCBpbi5cbiAgICAgICAgICAgIGdsID0gY2FudmFzRWwuZ2V0Q29udGV4dCgnd2ViZ2wyJywgeyBhbnRpYWxpYXM6IGZhbHNlIH0pXG4gICAgICAgICAgICAgICAgfHwgY2FudmFzRWwuZ2V0Q29udGV4dCgnd2ViZ2wnLCB7IGFudGlhbGlhczogZmFsc2UgfSk7XG4gICAgICAgICAgICAvLyB8fCBjYW52YXNFbC5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnLCB7YW50aWFsaWFzOmZhbHNlfSkgYXMgUmVuZGVyaW5nQ29udGV4dDtcbiAgICAgICAgICAgIGlmIChnbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2soJ1VuYWJsZSB0byBpbml0aWFsaXplIFdlYkdMIGNvbnRleHQuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2wgPSBnbDtcbiAgICAgICAgLy8gR0wgc2V0dXAuXG4gICAgICAgIC8vIExvYWQgZXh0ZW5zaW9ucy5cbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL09FU190ZXh0dXJlX2hhbGZfZmxvYXRcbiAgICAgICAgLy8gSGFsZiBmbG9hdCBpcyBzdXBwb3J0ZWQgYnkgbW9kZXJuIG1vYmlsZSBicm93c2VycywgZmxvYXQgbm90IHlldCBzdXBwb3J0ZWQuXG4gICAgICAgIC8vIEhhbGYgZmxvYXQgaXMgcHJvdmlkZWQgYnkgZGVmYXVsdCBmb3IgV2ViZ2wyIGNvbnRleHRzLlxuICAgICAgICAvLyBUaGlzIGV4dGVuc2lvbiBpbXBsaWNpdGx5IGVuYWJsZXMgdGhlIEVYVF9jb2xvcl9idWZmZXJfaGFsZl9mbG9hdCBleHRlbnNpb24gKGlmIHN1cHBvcnRlZCksIHdoaWNoIGFsbG93cyByZW5kZXJpbmcgdG8gMTYtYml0IGZsb2F0aW5nIHBvaW50IGZvcm1hdHMuXG4gICAgICAgIGlmICghZ2wuSEFMRl9GTE9BVClcbiAgICAgICAgICAgIHRoaXMubG9hZEV4dGVuc2lvbihPRVNfVEVYVFVSRV9IQUxGX0ZMT0FUKTtcbiAgICAgICAgLy8gTG9hZCBvcHRpb25hbCBleHRlbnNpb25zLlxuICAgICAgICB0aGlzLmxpbmVhckZpbHRlckVuYWJsZWQgPSB0aGlzLmxvYWRFeHRlbnNpb24oT0VTX1RFWFRVUkVfSEFsRl9GTE9BVF9MSU5FQVIsIHRydWUpO1xuICAgICAgICAvLyBEaXNhYmxlIGRlcHRoIHRlc3RpbmcgZ2xvYmFsbHkuXG4gICAgICAgIGdsLmRpc2FibGUoZ2wuREVQVEhfVEVTVCk7XG4gICAgICAgIC8vIFNldCB1bnBhY2sgYWxpZ25tZW50IHRvIDEgc28gd2UgY2FuIGhhdmUgdGV4dHVyZXMgb2YgYXJiaXRyYXJ5IGRpbWVuc2lvbnMuXG4gICAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzUxNTgyMjgyL2Vycm9yLXdoZW4tY3JlYXRpbmctdGV4dHVyZXMtaW4td2ViZ2wtd2l0aC10aGUtcmdiLWZvcm1hdFxuICAgICAgICBnbC5waXhlbFN0b3JlaShnbC5VTlBBQ0tfQUxJR05NRU5ULCAxKTtcbiAgICAgICAgLy8gSW5pdCBhIGRlZmF1bHQgdmVydGV4IHNoYWRlciB0aGF0IGp1c3QgcGFzc2VzIHRocm91Z2ggc2NyZWVuIGNvb3Jkcy5cbiAgICAgICAgdmFyIGRlZmF1bHRWZXJ0ZXhTaGFkZXIgPSB0aGlzLmNvbXBpbGVTaGFkZXIoRGVmYXVsdFZlcnRleFNoYWRlcl8xLmRlZmF1bHQsIGdsLlZFUlRFWF9TSEFERVIpO1xuICAgICAgICBpZiAoIWRlZmF1bHRWZXJ0ZXhTaGFkZXIpIHtcbiAgICAgICAgICAgIGVycm9yQ2FsbGJhY2soJ1VuYWJsZSB0byBpbml0aWFsaXplIGZ1bGxzY3JlZW4gcXVhZCB2ZXJ0ZXggc2hhZGVyLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVmYXVsdFZlcnRleFNoYWRlciA9IGRlZmF1bHRWZXJ0ZXhTaGFkZXI7XG4gICAgICAgIC8vIENyZWF0ZSB2ZXJ0ZXggYnVmZmVycy5cbiAgICAgICAgdGhpcy5xdWFkUG9zaXRpb25zQnVmZmVyID0gdGhpcy5pbml0VmVydGV4QnVmZmVyKGZzUXVhZFBvc2l0aW9ucyk7XG4gICAgICAgIHRoaXMuYm91bmRhcnlQb3NpdGlvbnNCdWZmZXIgPSB0aGlzLmluaXRWZXJ0ZXhCdWZmZXIoYm91bmRhcnlQb3NpdGlvbnMpO1xuICAgICAgICB0aGlzLmNpcmNsZVBvc2l0aW9uc0J1ZmZlciA9IHRoaXMuaW5pdFZlcnRleEJ1ZmZlcihjaXJjbGVQb3NpdGlvbnMpO1xuICAgICAgICAvLyBVbmJpbmQgYWN0aXZlIGJ1ZmZlci5cbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpO1xuICAgICAgICAvLyBDYW52YXMgc2V0dXAuXG4gICAgICAgIHRoaXMub25SZXNpemUoY2FudmFzRWwpO1xuICAgICAgICAvLyBMb2cgbnVtYmVyIG9mIHRleHR1cmVzIGF2YWlsYWJsZS5cbiAgICAgICAgdmFyIG1heFRleHR1cmVzSW5GcmFnbWVudFNoYWRlciA9IHRoaXMuZ2wuZ2V0UGFyYW1ldGVyKHRoaXMuZ2wuTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpO1xuICAgICAgICBjb25zb2xlLmxvZyhtYXhUZXh0dXJlc0luRnJhZ21lbnRTaGFkZXIgKyBcIiB0ZXh0dXJlcyBtYXguXCIpO1xuICAgIH1cbiAgICBHUEdQVS5wcm90b3R5cGUuaW5pdFZlcnRleEJ1ZmZlciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGVycm9yQ2FsbGJhY2sgPSBfYS5lcnJvckNhbGxiYWNrLCBnbCA9IF9hLmdsO1xuICAgICAgICB2YXIgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgICAgIGlmICghYnVmZmVyKSB7XG4gICAgICAgICAgICBlcnJvckNhbGxiYWNrKCdVbmFibGUgdG8gYWxsb2NhdGUgZ2wgYnVmZmVyLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpO1xuICAgICAgICAvLyBBZGQgdmVydGV4IGRhdGEgZm9yIGRyYXdpbmcgZnVsbCBzY3JlZW4gcXVhZCB2aWEgdHJpYW5nbGUgc3RyaXAuXG4gICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBkYXRhLCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfTtcbiAgICBHUEdQVS5wcm90b3R5cGUubG9hZEV4dGVuc2lvbiA9IGZ1bmN0aW9uIChleHRlbnNpb24sIG9wdGlvbmFsKSB7XG4gICAgICAgIGlmIChvcHRpb25hbCA9PT0gdm9pZCAwKSB7IG9wdGlvbmFsID0gZmFsc2U7IH1cbiAgICAgICAgdmFyIGV4dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGV4dCA9IHRoaXMuZ2wuZ2V0RXh0ZW5zaW9uKGV4dGVuc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICBpZiAoIWV4dCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVW5zdXBwb3J0ZWQgXCIgKyAob3B0aW9uYWwgPyAnb3B0aW9uYWwgJyA6ICcnKSArIFwiZXh0ZW5zaW9uOiBcIiArIGV4dGVuc2lvbiArIFwiLlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgZXh0ZW5zaW9uIGlzIG5vdCBvcHRpb25hbCwgdGhyb3cgZXJyb3IuXG4gICAgICAgIGlmICghZXh0ICYmICFvcHRpb25hbCkge1xuICAgICAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrKFwiUmVxdWlyZWQgZXh0ZW5zaW9uIHVuc3VwcG9ydGVkIGJ5IHRoaXMgZGV2aWNlIC8gYnJvd3NlcjogXCIgKyBleHRlbnNpb24gKyBcIi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEhZXh0O1xuICAgIH07XG4gICAgLy8gQ29waWVkIGZyb20gaHR0cDovL3dlYmdsZnVuZGFtZW50YWxzLm9yZy93ZWJnbC9sZXNzb25zL3dlYmdsLWJvaWxlcnBsYXRlLmh0bWxcbiAgICBHUEdQVS5wcm90b3R5cGUuY29tcGlsZVNoYWRlciA9IGZ1bmN0aW9uIChzaGFkZXJTb3VyY2UsIHNoYWRlclR5cGUpIHtcbiAgICAgICAgdmFyIGdsID0gdGhpcy5nbDtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBzaGFkZXIgb2JqZWN0XG4gICAgICAgIHZhciBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoc2hhZGVyVHlwZSk7XG4gICAgICAgIGlmICghc2hhZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2soJ1VuYWJsZSB0byBpbml0IGdsIHNoYWRlci4nKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNldCB0aGUgc2hhZGVyIHNvdXJjZSBjb2RlLlxuICAgICAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzaGFkZXJTb3VyY2UpO1xuICAgICAgICAvLyBDb21waWxlIHRoZSBzaGFkZXJcbiAgICAgICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuICAgICAgICAvLyBDaGVjayBpZiBpdCBjb21waWxlZFxuICAgICAgICB2YXIgc3VjY2VzcyA9IGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKTtcbiAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgICAvLyBTb21ldGhpbmcgd2VudCB3cm9uZyBkdXJpbmcgY29tcGlsYXRpb24gLSBwcmludCB0aGUgZXJyb3IuXG4gICAgICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2soXCJDb3VsZCBub3QgY29tcGlsZSBcIiArIChzaGFkZXJUeXBlID09PSBnbC5GUkFHTUVOVF9TSEFERVIgPyAnZnJhZ21lbnQnIDogJ3ZlcnRleCcpICsgXCJcXG5cXHRcXHRcXHRcXHQgc2hhZGVyOiBcIiArIGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNoYWRlcnMucHVzaChzaGFkZXIpO1xuICAgICAgICByZXR1cm4gc2hhZGVyO1xuICAgIH07XG4gICAgR1BHUFUucHJvdG90eXBlLmluaXRQcm9ncmFtID0gZnVuY3Rpb24gKHByb2dyYW1OYW1lLCBmcmFnbWVudFNoYWRlclNvdXJjZSwgdW5pZm9ybXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hID0gdGhpcywgcHJvZ3JhbXMgPSBfYS5wcm9ncmFtcywgZ2wgPSBfYS5nbDtcbiAgICAgICAgaWYgKHByb2dyYW1zW3Byb2dyYW1OYW1lXSkge1xuICAgICAgICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtc1twcm9ncmFtTmFtZV0ucHJvZ3JhbSk7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBbHJlYWR5IGEgcHJvZ3JhbSB3aXRoIHRoZSBuYW1lIFwiICsgcHJvZ3JhbU5hbWUgKyBcIi5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZyYWdtZW50U2hhZGVyID0gdGhpcy5jb21waWxlU2hhZGVyKGZyYWdtZW50U2hhZGVyU291cmNlLCBnbC5GUkFHTUVOVF9TSEFERVIpO1xuICAgICAgICAvLyBMb2FkIGZ1bGxzY3JlZW4gcXVhZCB2ZXJ0ZXggc2hhZGVyIGJ5IGRlZmF1bHQuXG4gICAgICAgIC8vIGNvbnN0IHZlcnRleFNoYWRlciA9IHZlcnRleFNoYWRlclNvdXJjZSA/XG4gICAgICAgIC8vIFx0dGhpcy5jb21waWxlU2hhZGVyKHZlcnRleFNoYWRlclNvdXJjZSwgZ2wuVkVSVEVYX1NIQURFUikgOlxuICAgICAgICAvLyBcdHRoaXMuZnNRdWFkVmVydGV4U2hhZGVyO1xuICAgICAgICB2YXIgdmVydGV4U2hhZGVyID0gdGhpcy5kZWZhdWx0VmVydGV4U2hhZGVyO1xuICAgICAgICBpZiAoIWZyYWdtZW50U2hhZGVyIHx8ICF2ZXJ0ZXhTaGFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayhcIlVuYWJsZSB0byBpbml0IHNoYWRlcnMgZm9yIHByb2dyYW0gXCIgKyBwcm9ncmFtTmFtZSArIFwiLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBDcmVhdGUgYSBwcm9ncmFtLlxuICAgICAgICB2YXIgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcbiAgICAgICAgaWYgKCFwcm9ncmFtKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2soJ1VuYWJsZSB0byBpbml0IGdsIHByb2dyYW0uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gQXR0YWNoIHRoZSBzaGFkZXJzLlxuICAgICAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydGV4U2hhZGVyKTtcbiAgICAgICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcbiAgICAgICAgLy8gTGluayB0aGUgcHJvZ3JhbS5cbiAgICAgICAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgIC8vIENoZWNrIGlmIGl0IGxpbmtlZC5cbiAgICAgICAgdmFyIHN1Y2Nlc3MgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKTtcbiAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgICAvLyBTb21ldGhpbmcgd2VudCB3cm9uZyB3aXRoIHRoZSBsaW5rLlxuICAgICAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrKFwiUHJvZ3JhbSBcIiArIHByb2dyYW1OYW1lICsgXCIgZmlsZWQgdG8gbGluazogXCIgKyBnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIG5ldyBwcm9ncmFtLlxuICAgICAgICBwcm9ncmFtc1twcm9ncmFtTmFtZV0gPSB7XG4gICAgICAgICAgICBwcm9ncmFtOiBwcm9ncmFtLFxuICAgICAgICAgICAgdW5pZm9ybXM6IHt9LFxuICAgICAgICB9O1xuICAgICAgICB1bmlmb3JtcyA9PT0gbnVsbCB8fCB1bmlmb3JtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdW5pZm9ybXMuZm9yRWFjaChmdW5jdGlvbiAodW5pZm9ybSkge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSB1bmlmb3JtLm5hbWUsIHZhbHVlID0gdW5pZm9ybS52YWx1ZSwgZGF0YVR5cGUgPSB1bmlmb3JtLmRhdGFUeXBlO1xuICAgICAgICAgICAgX3RoaXMuc2V0UHJvZ3JhbVVuaWZvcm0ocHJvZ3JhbU5hbWUsIG5hbWUsIHZhbHVlLCBkYXRhVHlwZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgO1xuICAgIEdQR1BVLnByb3RvdHlwZS51bmlmb3JtVHlwZUZvclZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBkYXRhVHlwZSkge1xuICAgICAgICBpZiAoZGF0YVR5cGUgPT09IGNvbnN0YW50c18xLkZMT0FUX1RZUEUpIHtcbiAgICAgICAgICAgIGlmICghaXNOYU4odmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zdGFudHNfMS5GTE9BVF8xRF9VTklGT1JNO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zdGFudHNfMS5GTE9BVF8yRF9VTklGT1JNO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zdGFudHNfMS5GTE9BVF8zRF9VTklGT1JNO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zdGFudHNfMS5GTE9BVF80RF9VTklGT1JNO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB1bmlmb3JtIHZhbHVlOiBcIiArIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhVHlwZSA9PT0gY29uc3RhbnRzXzEuSU5UX1RZUEUpIHtcbiAgICAgICAgICAgIGlmICghaXNOYU4odmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zdGFudHNfMS5JTlRfMURfVU5JRk9STTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc3RhbnRzXzEuSU5UXzJEX1VOSUZPUk07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0YW50c18xLklOVF8zRF9VTklGT1JNO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zdGFudHNfMS5JTlRfNERfVU5JRk9STTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdW5pZm9ybSB2YWx1ZTogXCIgKyB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHVuaWZvcm0gZGF0YSB0eXBlOiBcIiArIGRhdGFUeXBlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgR1BHUFUucHJvdG90eXBlLnNldFByb2dyYW1Vbmlmb3JtID0gZnVuY3Rpb24gKHByb2dyYW1OYW1lLCB1bmlmb3JtTmFtZSwgdmFsdWUsIGRhdGFUeXBlKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGdsID0gX2EuZ2wsIHByb2dyYW1zID0gX2EucHJvZ3JhbXM7XG4gICAgICAgIHZhciBwcm9ncmFtID0gcHJvZ3JhbXNbcHJvZ3JhbU5hbWVdO1xuICAgICAgICBpZiAoIXByb2dyYW0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdW50IG5vdCBzZXQgdW5pZm9ybSwgbm8gcHJvZ3JhbSBvZiBuYW1lOiBcIiArIHByb2dyYW1OYW1lICsgXCIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNldCBhY3RpdmUgcHJvZ3JhbS5cbiAgICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtLnByb2dyYW0pO1xuICAgICAgICB2YXIgdW5pZm9ybXMgPSBwcm9ncmFtLnVuaWZvcm1zO1xuICAgICAgICB2YXIgdHlwZSA9IHRoaXMudW5pZm9ybVR5cGVGb3JWYWx1ZSh2YWx1ZSwgZGF0YVR5cGUpO1xuICAgICAgICBpZiAoIXVuaWZvcm1zW3VuaWZvcm1OYW1lXSkge1xuICAgICAgICAgICAgLy8gSW5pdCB1bmlmb3JtIGlmIG5lZWRlZC5cbiAgICAgICAgICAgIHZhciBsb2NhdGlvbl8xID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0ucHJvZ3JhbSwgdW5pZm9ybU5hbWUpO1xuICAgICAgICAgICAgaWYgKCFsb2NhdGlvbl8xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrKFwiQ291bGQgbm90IGluaXQgdW5pZm9ybSBcIiArIHVuaWZvcm1OYW1lICsgXCIgZm9yIHByb2dyYW0gXCIgKyBwcm9ncmFtTmFtZSArIFwiLlxcbkNoZWNrIHRoYXQgdW5pZm9ybSBpcyBwcmVzZW50IGluIHNoYWRlciBjb2RlLCB1bnVzZWQgdW5pZm9ybXMgbWF5IGJlIHJlbW92ZWQgYnkgY29tcGlsZXIuXFxuQWxzbyBjaGVjayB0aGF0IHVuaWZvcm0gdHlwZSBpbiBzaGFkZXIgY29kZSBtYXRjaGVzIHR5cGUgXCIgKyB0eXBlICsgXCIuXFxuRXJyb3IgY29kZTogXCIgKyBnbC5nZXRFcnJvcigpICsgXCIuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVuaWZvcm1zW3VuaWZvcm1OYW1lXSA9IHtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb25fMSxcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdW5pZm9ybSA9IHVuaWZvcm1zW3VuaWZvcm1OYW1lXTtcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCB0eXBlcyBtYXRjaCBwcmV2aW91c2x5IHNldCB1bmlmb3JtLlxuICAgICAgICBpZiAodW5pZm9ybS50eXBlICE9IHR5cGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuaWZvcm0gXCIgKyB1bmlmb3JtTmFtZSArIFwiIGNhbm5vdCBjaGFuZ2UgZnJvbSB0eXBlIFwiICsgdW5pZm9ybS50eXBlICsgXCIgdG8gdHlwZSBcIiArIHR5cGUgKyBcIi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxvY2F0aW9uID0gdW5pZm9ybS5sb2NhdGlvbjtcbiAgICAgICAgLy8gU2V0IHVuaWZvcm0uXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XZWJHTFJlbmRlcmluZ0NvbnRleHQvdW5pZm9ybVxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuRkxPQVRfMURfVU5JRk9STTpcbiAgICAgICAgICAgICAgICBnbC51bmlmb3JtMWYobG9jYXRpb24sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuRkxPQVRfMkRfVU5JRk9STTpcbiAgICAgICAgICAgICAgICBnbC51bmlmb3JtMmZ2KGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLkZMT0FUXzNEX1VOSUZPUk06XG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybTNmdihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5GTE9BVF80RF9VTklGT1JNOlxuICAgICAgICAgICAgICAgIGdsLnVuaWZvcm00ZnYobG9jYXRpb24sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuSU5UXzFEX1VOSUZPUk06XG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybTFpKGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGNvbnN0YW50c18xLklOVF8yRF9VTklGT1JNOlxuICAgICAgICAgICAgICAgIGdsLnVuaWZvcm0yaXYobG9jYXRpb24sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgY29uc3RhbnRzXzEuSU5UXzNEX1VOSUZPUk06XG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybTNpdihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBjb25zdGFudHNfMS5JTlRfNERfVU5JRk9STTpcbiAgICAgICAgICAgICAgICBnbC51bmlmb3JtNGl2KGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdW5pZm9ybSB0eXBlOiBcIiArIHR5cGUgKyBcIi5cIik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIDtcbiAgICBHUEdQVS5wcm90b3R5cGUuaW5pdEZyYW1lYnVmZmVyRm9yVGV4dHVyZSA9IGZ1bmN0aW9uICh0ZXh0dXJlTmFtZSwgc2hvdWxkT3ZlcndyaXRlKSB7XG4gICAgICAgIGlmIChzaG91bGRPdmVyd3JpdGUgPT09IHZvaWQgMCkgeyBzaG91bGRPdmVyd3JpdGUgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgX2EgPSB0aGlzLCBnbCA9IF9hLmdsLCBmcmFtZWJ1ZmZlcnMgPSBfYS5mcmFtZWJ1ZmZlcnM7XG4gICAgICAgIGlmIChmcmFtZWJ1ZmZlcnNbdGV4dHVyZU5hbWVdKSB7XG4gICAgICAgICAgICBpZiAoIXNob3VsZE92ZXJ3cml0ZSlcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBbHJlYWR5IGEgZnJhbWVidWZmZXIgd2l0aCB0aGUgbmFtZSBcIiArIHRleHR1cmVOYW1lICsgXCIsIHVzZSBzaG91bGRPdmVyd3JpdGUgZmxhZyBpbiBpbml0VGV4dHVyZSgpIHRvIGlnbm9yZS5cIik7XG4gICAgICAgICAgICBnbC5kZWxldGVGcmFtZWJ1ZmZlcihmcmFtZWJ1ZmZlcnNbdGV4dHVyZU5hbWVdKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGV4dHVyZSA9IHRoaXMudGV4dHVyZXNbdGV4dHVyZU5hbWVdO1xuICAgICAgICBpZiAoIXRleHR1cmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBpbml0IGZyYW1lYnVmZmVyLCB0ZXh0dXJlIFwiICsgdGV4dHVyZU5hbWUgKyBcIiBkb2VzIG5vdCBleGlzdC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZyYW1lYnVmZmVyID0gZ2wuY3JlYXRlRnJhbWVidWZmZXIoKTtcbiAgICAgICAgaWYgKCFmcmFtZWJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrKFwiQ291bGQgbm90IGluaXQgXCIgKyB0ZXh0dXJlTmFtZSArIFwiIGZyYW1lYnVmZmVyOiBcIiArIGdsLmdldEVycm9yKCkgKyBcIi5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBmcmFtZWJ1ZmZlcik7XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XZWJHTFJlbmRlcmluZ0NvbnRleHQvZnJhbWVidWZmZXJUZXh0dXJlMkRcbiAgICAgICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5URVhUVVJFXzJELCB0ZXh0dXJlLCAwKTtcbiAgICAgICAgdmFyIHN0YXR1cyA9IGdsLmNoZWNrRnJhbWVidWZmZXJTdGF0dXMoZ2wuRlJBTUVCVUZGRVIpO1xuICAgICAgICBpZiAoc3RhdHVzICE9IGdsLkZSQU1FQlVGRkVSX0NPTVBMRVRFKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2soXCJJbnZhbGlkIHN0YXR1cyBmb3IgXCIgKyB0ZXh0dXJlTmFtZSArIFwiIGZyYW1lYnVmZmVyOiBcIiArIHN0YXR1cyArIFwiLlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyYW1lYnVmZmVyc1t0ZXh0dXJlTmFtZV0gPSBmcmFtZWJ1ZmZlcjtcbiAgICB9O1xuICAgIDtcbiAgICBHUEdQVS5wcm90b3R5cGUuZ2xUZXh0dXJlRm9ybWF0Rm9yTnVtQ2hhbm5lbHMgPSBmdW5jdGlvbiAobnVtQ2hhbm5lbHMpIHtcbiAgICAgICAgLy8gVE9ETzogZm9yIHJlYWQgb25seSB0ZXh0dXJlcyBpbiBXZWJHTCAxLjAsIHdlIGNvdWxkIHVzZSBnbC5BTFBIQSBhbmQgZ2wuTFVNSU5BTkNFX0FMUEhBIGhlcmUuXG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgICAgIHN3aXRjaCAobnVtQ2hhbm5lbHMpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBnbEZvcm1hdDogZ2wuUkdCLFxuICAgICAgICAgICAgICAgICAgICBnbE51bUNoYW5uZWxzOiAzLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZ2xGb3JtYXQ6IGdsLlJHQixcbiAgICAgICAgICAgICAgICAgICAgZ2xOdW1DaGFubmVsczogMyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGdsRm9ybWF0OiBnbC5SR0IsXG4gICAgICAgICAgICAgICAgICAgIGdsTnVtQ2hhbm5lbHM6IDMsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBnbEZvcm1hdDogZ2wuUkdCQSxcbiAgICAgICAgICAgICAgICAgICAgZ2xOdW1DaGFubmVsczogNCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBHUEdQVS5wcm90b3R5cGUuZ2xUZXh0dXJlVHlwZUZvclR5cGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2Zsb2F0MTYnOlxuICAgICAgICAgICAgICAgIGlmIChnbC5IQUxGX0ZMT0FUKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2wuSEFMRl9GTE9BVDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2wuSEFMRl9GTE9BVF9PRVM7XG4gICAgICAgICAgICBjYXNlICd1aW50OCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdsLlVOU0lHTkVEX0JZVEU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEdQR1BVLnByb3RvdHlwZS5pbml0VGV4dHVyZSA9IGZ1bmN0aW9uICh0ZXh0dXJlTmFtZSwgd2lkdGgsIGhlaWdodCwgdHlwZSwgbnVtQ2hhbm5lbHMsIHdyaXRhYmxlLCBkYXRhLCBzaG91bGRPdmVyd3JpdGUpIHtcbiAgICAgICAgaWYgKHdyaXRhYmxlID09PSB2b2lkIDApIHsgd3JpdGFibGUgPSBmYWxzZTsgfVxuICAgICAgICBpZiAoc2hvdWxkT3ZlcndyaXRlID09PSB2b2lkIDApIHsgc2hvdWxkT3ZlcndyaXRlID0gZmFsc2U7IH1cbiAgICAgICAgdmFyIF9hID0gdGhpcywgZ2wgPSBfYS5nbCwgdGV4dHVyZXMgPSBfYS50ZXh0dXJlcywgZnJhbWVidWZmZXJzID0gX2EuZnJhbWVidWZmZXJzO1xuICAgICAgICBpZiAodGV4dHVyZXNbdGV4dHVyZU5hbWVdKSB7XG4gICAgICAgICAgICBpZiAoIXNob3VsZE92ZXJ3cml0ZSlcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBbHJlYWR5IGEgdGV4dHVyZSB3aXRoIHRoZSBuYW1lIFwiICsgdGV4dHVyZU5hbWUgKyBcIiwgdXNlIHNob3VsZE92ZXJ3cml0ZSBmbGFnIHRvIGlnbm9yZS5cIik7XG4gICAgICAgICAgICBnbC5kZWxldGVUZXh0dXJlKHRleHR1cmVzW3RleHR1cmVOYW1lXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgdGhhdCBkYXRhIGlzIGNvcnJlY3QgbGVuZ3RoLlxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCAhPT0gd2lkdGggKiBoZWlnaHQgKiBudW1DaGFubmVscykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBkYXRhIGFycmF5IG9mIHNpemUgXCIgKyBkYXRhLmxlbmd0aCArIFwiIGZvciB0ZXh0dXJlIG9mIGRpbWVuc2lvbnMgXCIgKyB3aWR0aCArIFwiIHggXCIgKyBoZWlnaHQgKyBcIiB4IFwiICsgbnVtQ2hhbm5lbHMgKyBcIi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgICAgIGlmICghdGV4dHVyZSkge1xuICAgICAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrKFwiQ291bGQgbm90IGluaXQgXCIgKyB0ZXh0dXJlTmFtZSArIFwiIHRleHR1cmU6IFwiICsgZ2wuZ2V0RXJyb3IoKSArIFwiLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcbiAgICAgICAgLy8gVE9ETzogZGlnIGludG8gdGhpcy5cbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSk7XG4gICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgICAgICB2YXIgZmlsdGVyID0gZ2wuTkVBUkVTVDsgLy90aGlzLmxpbmVhckZpbHRlckVuYWJsZWQgPyBnbC5MSU5FQVIgOiBnbC5ORUFSRVNUO1xuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZmlsdGVyKTtcbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGZpbHRlcik7XG4gICAgICAgIC8vIFRPRE86IENoZWNrIHRoYXQgZGF0YSBpcyBjb3JyZWN0IHR5cGUuXG4gICAgICAgIC8vIGlmIChkYXRhICYmIHR5cGUgPT09ICdmbG9hdDE2Jykge1xuICAgICAgICAvLyBcdC8vIC8vIFNpbmNlIHRoZXJlIGlzIG5vIEZsb2F0MTZUeXBlZEFycmF5LCB3ZSBtdXN0IGNvbnZlcnQgRmxvYXQzMlxuICAgICAgICAvLyBcdC8vIC8vIHRvIEZsb2F0MTYgYW5kIHBhc3MgaW4gYXMgYW4gSW50MTZUeXBlZEFycmF5LlxuICAgICAgICAvLyBcdC8vIGNvbnN0IGZsb2F0MTZBcnJheSA9IG5ldyBJbnQxNkFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICAgICAgLy8gXHQvLyBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gXHQvLyB9XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYkdMUmVuZGVyaW5nQ29udGV4dC90ZXhJbWFnZTJEXG4gICAgICAgIHZhciBfYiA9IHRoaXMuZ2xUZXh0dXJlRm9ybWF0Rm9yTnVtQ2hhbm5lbHMobnVtQ2hhbm5lbHMpLCBnbEZvcm1hdCA9IF9iLmdsRm9ybWF0LCBnbE51bUNoYW5uZWxzID0gX2IuZ2xOdW1DaGFubmVscztcbiAgICAgICAgdmFyIGdsVHlwZSA9IHRoaXMuZ2xUZXh0dXJlVHlwZUZvclR5cGUodHlwZSk7XG4gICAgICAgIC8vIENoZWNrIHRoYXQgZGF0YSBpcyBjb3JyZWN0IGxlbmd0aC5cbiAgICAgICAgaWYgKGRhdGEgJiYgbnVtQ2hhbm5lbHMgIT09IGdsTnVtQ2hhbm5lbHMpIHtcbiAgICAgICAgICAgIHZhciBpbWFnZVNpemUgPSB3aWR0aCAqIGhlaWdodDtcbiAgICAgICAgICAgIHZhciBuZXdBcnJheSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VpbnQ4JzpcbiAgICAgICAgICAgICAgICAgICAgbmV3QXJyYXkgPSBuZXcgVWludDhBcnJheSh3aWR0aCAqIGhlaWdodCAqIGdsTnVtQ2hhbm5lbHMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCB0eXBlIFwiICsgdHlwZSArIFwiIGZvciBpbml0VGV4dHVyZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGaWxsIG5ldyBkYXRhIGFycmF5IHdpdGggb2xkIGRhdGEuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGltYWdlU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1DaGFubmVsczsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0FycmF5W2dsTnVtQ2hhbm5lbHMgKiBpICsgal0gPSBkYXRhW2kgKiBudW1DaGFubmVscyArIGpdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGEgPSBuZXdBcnJheTtcbiAgICAgICAgfVxuICAgICAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsRm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBnbEZvcm1hdCwgZ2xUeXBlLCBkYXRhID8gZGF0YSA6IG51bGwpO1xuICAgICAgICB0ZXh0dXJlc1t0ZXh0dXJlTmFtZV0gPSB0ZXh0dXJlO1xuICAgICAgICBpZiAoIXdyaXRhYmxlKSB7XG4gICAgICAgICAgICAvLyBEZWxldGUgdW51c2VkIGZyYW1lYnVmZmVyIGlmIG5lZWRlZC5cbiAgICAgICAgICAgIGlmIChzaG91bGRPdmVyd3JpdGUgJiYgZnJhbWVidWZmZXJzW3RleHR1cmVOYW1lXSkge1xuICAgICAgICAgICAgICAgIGdsLmRlbGV0ZUZyYW1lYnVmZmVyKGZyYW1lYnVmZmVyc1t0ZXh0dXJlTmFtZV0pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBmcmFtZWJ1ZmZlcnNbdGV4dHVyZU5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIEluaXQgYSBmcmFtZWJ1ZmZlciBmb3IgdGhpcyB0ZXh0dXJlIHNvIHdlIGNhbiB3cml0ZSB0byBpdC5cbiAgICAgICAgdGhpcy5pbml0RnJhbWVidWZmZXJGb3JUZXh0dXJlKHRleHR1cmVOYW1lLCBzaG91bGRPdmVyd3JpdGUpO1xuICAgIH07XG4gICAgO1xuICAgIEdQR1BVLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uIChjYW52YXNFbCkge1xuICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xuICAgICAgICB2YXIgd2lkdGggPSBjYW52YXNFbC5jbGllbnRXaWR0aDtcbiAgICAgICAgdmFyIGhlaWdodCA9IGNhbnZhc0VsLmNsaWVudEhlaWdodDtcbiAgICAgICAgZ2wudmlld3BvcnQoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIC8vIFNldCBjb3JyZWN0IGNhbnZhcyBwaXhlbCBzaXplLlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViR0xfQVBJL0J5X2V4YW1wbGUvQ2FudmFzX3NpemVfYW5kX1dlYkdMXG4gICAgICAgIGNhbnZhc0VsLndpZHRoID0gd2lkdGg7XG4gICAgICAgIGNhbnZhc0VsLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgLy8gU2F2ZSBkaW1lbnNpb25zLlxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH07XG4gICAgO1xuICAgIEdQR1BVLnByb3RvdHlwZS5fc3RlcCA9IGZ1bmN0aW9uIChwcm9ncmFtTmFtZSwgaW5wdXRUZXh0dXJlcywgb3V0cHV0VGV4dHVyZSkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBnbCA9IF9hLmdsLCBwcm9ncmFtcyA9IF9hLnByb2dyYW1zLCBmcmFtZWJ1ZmZlcnMgPSBfYS5mcmFtZWJ1ZmZlcnM7XG4gICAgICAgIHZhciBwcm9ncmFtID0gcHJvZ3JhbXNbcHJvZ3JhbU5hbWVdO1xuICAgICAgICBpZiAoIXByb2dyYW0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcHJvZ3JhbSBuYW1lOiBcIiArIHByb2dyYW1OYW1lICsgXCIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbS5wcm9ncmFtKTtcbiAgICAgICAgdmFyIGZyYW1lYnVmZmVyID0gb3V0cHV0VGV4dHVyZSA/IGZyYW1lYnVmZmVyc1tvdXRwdXRUZXh0dXJlXSA6IG51bGw7XG4gICAgICAgIGlmIChmcmFtZWJ1ZmZlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG91dHB1dCB0ZXh0dXJlOiBcIiArIG91dHB1dFRleHR1cmUgKyBcIi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBmcmFtZWJ1ZmZlcik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXRUZXh0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCArIGkpO1xuICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy50ZXh0dXJlc1tpbnB1dFRleHR1cmVzW2ldXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUG9pbnQgYXR0cmlidXRlIHRvIHRoZSBjdXJyZW50bHkgYm91bmQgVkJPLlxuICAgICAgICB2YXIgcG9zaXRpb25Mb2NhdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0ucHJvZ3JhbSwgJ2FQb3NpdGlvbicpO1xuICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHBvc2l0aW9uTG9jYXRpb24sIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgIC8vIEVuYWJsZSB0aGUgYXR0cmlidXRlLlxuICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShwb3NpdGlvbkxvY2F0aW9uKTtcbiAgICB9O1xuICAgIDtcbiAgICAvLyBTdGVwIGZvciBlbnRpcmUgZnVsbHNjcmVlbiBxdWFkLlxuICAgIEdQR1BVLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKHByb2dyYW1OYW1lLCBpbnB1dFRleHR1cmVzLCBvdXRwdXRUZXh0dXJlKSB7XG4gICAgICAgIGlmIChpbnB1dFRleHR1cmVzID09PSB2b2lkIDApIHsgaW5wdXRUZXh0dXJlcyA9IFtdOyB9XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGdsID0gX2EuZ2wsIGVycm9yU3RhdGUgPSBfYS5lcnJvclN0YXRlLCBxdWFkUG9zaXRpb25zQnVmZmVyID0gX2EucXVhZFBvc2l0aW9uc0J1ZmZlcjtcbiAgICAgICAgLy8gSWdub3JlIGlmIHdlIGFyZSBpbiBlcnJvciBzdGF0ZS5cbiAgICAgICAgaWYgKGVycm9yU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgdW5pZm9ybXMgYW5kIGJ1ZmZlcnMuXG4gICAgICAgIHRoaXMuc2V0UHJvZ3JhbVVuaWZvcm0ocHJvZ3JhbU5hbWUsICd1X3NjYWxlJywgWzEsIDFdLCAnRkxPQVQnKTtcbiAgICAgICAgdGhpcy5zZXRQcm9ncmFtVW5pZm9ybShwcm9ncmFtTmFtZSwgJ3VfdHJhbnNsYXRpb24nLCBbMCwgMF0sICdGTE9BVCcpO1xuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgcXVhZFBvc2l0aW9uc0J1ZmZlcik7XG4gICAgICAgIHRoaXMuX3N0ZXAocHJvZ3JhbU5hbWUsIGlucHV0VGV4dHVyZXMsIG91dHB1dFRleHR1cmUpO1xuICAgICAgICAvLyBEcmF3LlxuICAgICAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCAwLCA0KTtcbiAgICB9O1xuICAgIC8vIFN0ZXAgcHJvZ3JhbSBvbmx5IGZvciBhIHN0cmlwIG9mIHB4IGFsb25nIHRoZSBib3VuZGFyeS5cbiAgICBHUEdQVS5wcm90b3R5cGUuc3RlcEJvdW5kYXJ5ID0gZnVuY3Rpb24gKHByb2dyYW1OYW1lLCBpbnB1dFRleHR1cmVzLCBvdXRwdXRUZXh0dXJlKSB7XG4gICAgICAgIGlmIChpbnB1dFRleHR1cmVzID09PSB2b2lkIDApIHsgaW5wdXRUZXh0dXJlcyA9IFtdOyB9XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGdsID0gX2EuZ2wsIGVycm9yU3RhdGUgPSBfYS5lcnJvclN0YXRlLCBib3VuZGFyeVBvc2l0aW9uc0J1ZmZlciA9IF9hLmJvdW5kYXJ5UG9zaXRpb25zQnVmZmVyO1xuICAgICAgICAvLyBJZ25vcmUgaWYgd2UgYXJlIGluIGVycm9yIHN0YXRlLlxuICAgICAgICBpZiAoZXJyb3JTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSB1bmlmb3JtcyBhbmQgYnVmZmVycy5cbiAgICAgICAgdGhpcy5zZXRQcm9ncmFtVW5pZm9ybShwcm9ncmFtTmFtZSwgJ3Vfc2NhbGUnLCBbMSwgMV0sICdGTE9BVCcpO1xuICAgICAgICB0aGlzLnNldFByb2dyYW1Vbmlmb3JtKHByb2dyYW1OYW1lLCAndV90cmFuc2xhdGlvbicsIFswLCAwXSwgJ0ZMT0FUJyk7XG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBib3VuZGFyeVBvc2l0aW9uc0J1ZmZlcik7XG4gICAgICAgIHRoaXMuX3N0ZXAocHJvZ3JhbU5hbWUsIGlucHV0VGV4dHVyZXMsIG91dHB1dFRleHR1cmUpO1xuICAgICAgICAvLyBEcmF3LlxuICAgICAgICBnbC5kcmF3QXJyYXlzKGdsLkxJTkVfTE9PUCwgMCwgNCk7IC8vIERyYXcgdG8gZnJhbWVidWZmZXIuXG4gICAgfTtcbiAgICAvLyAvLyBTdGVwIHByb2dyYW0gZm9yIGFsbCBidXQgYSBzdHJpcCBvZiBweCBhbG9uZyB0aGUgYm91bmRhcnkuXG4gICAgLy8gc3RlcE5vbkJvdW5kYXJ5KFxuICAgIC8vIFx0cHJvZ3JhbU5hbWU6IHN0cmluZyxcbiAgICAvLyBcdGlucHV0VGV4dHVyZXM6IHN0cmluZ1tdID0gW10sXG4gICAgLy8gXHRvdXRwdXRUZXh0dXJlPzogc3RyaW5nLCAvLyBVbmRlZmluZWQgcmVuZGVycyB0byBzY3JlZW4uXG4gICAgLy8gKSB7XG4gICAgLy8gXHRjb25zdCB7IGdsLCBlcnJvclN0YXRlIH0gPSB0aGlzO1xuICAgIC8vIFx0Ly8gSWdub3JlIGlmIHdlIGFyZSBpbiBlcnJvciBzdGF0ZS5cbiAgICAvLyBcdGlmIChlcnJvclN0YXRlKSB7XG4gICAgLy8gXHRcdHJldHVybjtcbiAgICAvLyBcdH1cbiAgICAvLyBcdHRoaXMuX3N0ZXAocHJvZ3JhbU5hbWUsIGlucHV0VGV4dHVyZXMsIG91dHB1dFRleHR1cmUpO1xuICAgIC8vIFx0Z2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRV9TVFJJUCwgMCwgNCk7Ly8gRHJhdyB0byBmcmFtZWJ1ZmZlci5cbiAgICAvLyB9XG4gICAgLy8gU3RlcCBwcm9ncmFtIG9ubHkgZm9yIGEgY2lyY3VsYXIgc3BvdC5cbiAgICBHUEdQVS5wcm90b3R5cGUuc3RlcENpcmNsZSA9IGZ1bmN0aW9uIChwcm9ncmFtTmFtZSwgcG9zaXRpb24sIC8vIHBvc2l0aW9uIGlzIGluIHNjcmVlbiBzcGFjZSBjb29yZHMuXG4gICAgcmFkaXVzLCAvLyByYWRpdXMgaXMgaW4gcHguXG4gICAgaW5wdXRUZXh0dXJlcywgb3V0cHV0VGV4dHVyZSkge1xuICAgICAgICBpZiAoaW5wdXRUZXh0dXJlcyA9PT0gdm9pZCAwKSB7IGlucHV0VGV4dHVyZXMgPSBbXTsgfVxuICAgICAgICB2YXIgX2EgPSB0aGlzLCBnbCA9IF9hLmdsLCBlcnJvclN0YXRlID0gX2EuZXJyb3JTdGF0ZSwgY2lyY2xlUG9zaXRpb25zQnVmZmVyID0gX2EuY2lyY2xlUG9zaXRpb25zQnVmZmVyLCB3aWR0aCA9IF9hLndpZHRoLCBoZWlnaHQgPSBfYS5oZWlnaHQ7XG4gICAgICAgIC8vIElnbm9yZSBpZiB3ZSBhcmUgaW4gZXJyb3Igc3RhdGUuXG4gICAgICAgIGlmIChlcnJvclN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXBkYXRlIHVuaWZvcm1zIGFuZCBidWZmZXJzLlxuICAgICAgICB0aGlzLnNldFByb2dyYW1Vbmlmb3JtKHByb2dyYW1OYW1lLCAndV9zY2FsZScsIFtyYWRpdXMgLyB3aWR0aCwgcmFkaXVzIC8gaGVpZ2h0XSwgJ0ZMT0FUJyk7XG4gICAgICAgIC8vIEZsaXAgeSBheGlzLlxuICAgICAgICB0aGlzLnNldFByb2dyYW1Vbmlmb3JtKHByb2dyYW1OYW1lLCAndV90cmFuc2xhdGlvbicsIFsyICogcG9zaXRpb25bMF0gLyB3aWR0aCAtIDEsIC0yICogcG9zaXRpb25bMV0gLyBoZWlnaHQgKyAxXSwgJ0ZMT0FUJyk7XG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBjaXJjbGVQb3NpdGlvbnNCdWZmZXIpO1xuICAgICAgICB0aGlzLl9zdGVwKHByb2dyYW1OYW1lLCBpbnB1dFRleHR1cmVzLCBvdXRwdXRUZXh0dXJlKTtcbiAgICAgICAgLy8gRHJhdy5cbiAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRV9GQU4sIDAsIE5VTV9TRUdNRU5UU19DSVJDTEUgKyAyKTsgLy8gRHJhdyB0byBmcmFtZWJ1ZmZlci5cbiAgICB9O1xuICAgIEdQR1BVLnByb3RvdHlwZS5zd2FwVGV4dHVyZXMgPSBmdW5jdGlvbiAodGV4dHVyZTFOYW1lLCB0ZXh0dXJlMk5hbWUpIHtcbiAgICAgICAgdmFyIHRlbXAgPSB0aGlzLnRleHR1cmVzW3RleHR1cmUxTmFtZV07XG4gICAgICAgIHRoaXMudGV4dHVyZXNbdGV4dHVyZTFOYW1lXSA9IHRoaXMudGV4dHVyZXNbdGV4dHVyZTJOYW1lXTtcbiAgICAgICAgdGhpcy50ZXh0dXJlc1t0ZXh0dXJlMk5hbWVdID0gdGVtcDtcbiAgICAgICAgdGVtcCA9IHRoaXMuZnJhbWVidWZmZXJzW3RleHR1cmUxTmFtZV07XG4gICAgICAgIHRoaXMuZnJhbWVidWZmZXJzW3RleHR1cmUxTmFtZV0gPSB0aGlzLmZyYW1lYnVmZmVyc1t0ZXh0dXJlMk5hbWVdO1xuICAgICAgICB0aGlzLmZyYW1lYnVmZmVyc1t0ZXh0dXJlMk5hbWVdID0gdGVtcDtcbiAgICB9O1xuICAgIDtcbiAgICAvLyBzd2FwM1RleHR1cmVzKFxuICAgIC8vIFx0dGV4dHVyZTFOYW1lOiBzdHJpbmcsXG4gICAgLy8gXHR0ZXh0dXJlMk5hbWU6IHN0cmluZyxcbiAgICAvLyBcdHRleHR1cmUzTmFtZTogc3RyaW5nLFxuICAgIC8vICkge1xuICAgIC8vICAgICBsZXQgdGVtcCA9IHRoaXMudGV4dHVyZXNbdGV4dHVyZTNOYW1lXTtcbiAgICAvLyAgICAgdGhpcy50ZXh0dXJlc1t0ZXh0dXJlM05hbWVdID0gdGhpcy50ZXh0dXJlc1t0ZXh0dXJlMk5hbWVdO1xuICAgIC8vICAgICB0aGlzLnRleHR1cmVzW3RleHR1cmUyTmFtZV0gPSB0aGlzLnRleHR1cmVzW3RleHR1cmUxTmFtZV07XG4gICAgLy8gICAgIHRoaXMudGV4dHVyZXNbdGV4dHVyZTFOYW1lXSA9IHRlbXA7XG4gICAgLy8gICAgIHRlbXAgPSB0aGlzLmZyYW1lYnVmZmVyc1t0ZXh0dXJlM05hbWVdO1xuICAgIC8vICAgICB0aGlzLmZyYW1lYnVmZmVyc1t0ZXh0dXJlM05hbWVdID0gdGhpcy5mcmFtZWJ1ZmZlcnNbdGV4dHVyZTJOYW1lXTtcbiAgICAvLyAgICAgdGhpcy5mcmFtZWJ1ZmZlcnNbdGV4dHVyZTJOYW1lXSA9IHRoaXMuZnJhbWVidWZmZXJzW3RleHR1cmUxTmFtZV07XG4gICAgLy8gICAgIHRoaXMuZnJhbWVidWZmZXJzW3RleHR1cmUxTmFtZV0gPSB0ZW1wO1xuICAgIC8vIH07XG4gICAgLy8gcmVhZHlUb1JlYWQoKSB7XG4gICAgLy8gXHRjb25zdCB7IGdsIH0gPSB0aGlzO1xuICAgIC8vICAgICByZXR1cm4gZ2wuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhnbC5GUkFNRUJVRkZFUikgPT0gZ2wuRlJBTUVCVUZGRVJfQ09NUExFVEU7XG4gICAgLy8gfTtcbiAgICAvLyByZWFkUGl4ZWxzKHhNaW46IG51bWJlciwgeU1pbjogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgYXJyYXk6IFRleHR1cmVEYXRhVHlwZSkge1xuICAgIC8vIFx0Y29uc3QgeyBnbCB9ID0gdGhpcztcbiAgICAvLyBcdGdsLnJlYWRQaXhlbHMoeE1pbiwgeU1pbiwgd2lkdGgsIGhlaWdodCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgYXJyYXkpO1xuICAgIC8vIH07XG4gICAgR1BHUFUucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBUT0RPOiBtYWtlIHN1cmUgd2UgYXJlIGFjdHVhbGx5IGRlYWxsb2NhdGluZyByZXNvdXJjZXMgaGVyZS5cbiAgICAgICAgdmFyIF9hID0gdGhpcywgZ2wgPSBfYS5nbCwgcHJvZ3JhbXMgPSBfYS5wcm9ncmFtcywgZnJhbWVidWZmZXJzID0gX2EuZnJhbWVidWZmZXJzLCB0ZXh0dXJlcyA9IF9hLnRleHR1cmVzLCBzaGFkZXJzID0gX2Euc2hhZGVycywgZGVmYXVsdFZlcnRleFNoYWRlciA9IF9hLmRlZmF1bHRWZXJ0ZXhTaGFkZXI7XG4gICAgICAgIC8vIFVuYmluZCBhbGwgZGF0YSBiZWZvcmUgZGVsZXRpbmcuXG4gICAgICAgIE9iamVjdC5rZXlzKHByb2dyYW1zKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHZhciBwcm9ncmFtID0gcHJvZ3JhbXNba2V5XS5wcm9ncmFtO1xuICAgICAgICAgICAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgICAgIGRlbGV0ZSBwcm9ncmFtc1trZXldO1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmtleXMoZnJhbWVidWZmZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHZhciBmcmFtZWJ1ZmZlciA9IGZyYW1lYnVmZmVyc1trZXldO1xuICAgICAgICAgICAgZ2wuZGVsZXRlRnJhbWVidWZmZXIoZnJhbWVidWZmZXIpO1xuICAgICAgICAgICAgZGVsZXRlIGZyYW1lYnVmZmVyc1trZXldO1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmtleXModGV4dHVyZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIHRleHR1cmUgPSB0ZXh0dXJlc1trZXldO1xuICAgICAgICAgICAgZ2wuZGVsZXRlVGV4dHVyZSh0ZXh0dXJlKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0ZXh0dXJlc1trZXldO1xuICAgICAgICB9KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHNoYWRlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmIChzaGFkZXJzW2ldID09PSBkZWZhdWx0VmVydGV4U2hhZGVyKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XZWJHTFJlbmRlcmluZ0NvbnRleHQvZGVsZXRlU2hhZGVyXG4gICAgICAgICAgICAvLyBUaGlzIG1ldGhvZCBoYXMgbm8gZWZmZWN0IGlmIHRoZSBzaGFkZXIgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkXG4gICAgICAgICAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyc1tpXSk7XG4gICAgICAgICAgICBzaGFkZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgO1xuICAgIHJldHVybiBHUEdQVTtcbn0oKSk7XG5leHBvcnRzLkdQR1BVID0gR1BHUFU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HUEdQVS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSU5UX1RZUEUgPSBleHBvcnRzLkZMT0FUX1RZUEUgPSBleHBvcnRzLklOVF80RF9VTklGT1JNID0gZXhwb3J0cy5JTlRfM0RfVU5JRk9STSA9IGV4cG9ydHMuSU5UXzJEX1VOSUZPUk0gPSBleHBvcnRzLklOVF8xRF9VTklGT1JNID0gZXhwb3J0cy5GTE9BVF80RF9VTklGT1JNID0gZXhwb3J0cy5GTE9BVF8zRF9VTklGT1JNID0gZXhwb3J0cy5GTE9BVF8yRF9VTklGT1JNID0gZXhwb3J0cy5GTE9BVF8xRF9VTklGT1JNID0gdm9pZCAwO1xuZXhwb3J0cy5GTE9BVF8xRF9VTklGT1JNID0gJzFmJztcbmV4cG9ydHMuRkxPQVRfMkRfVU5JRk9STSA9ICcyZic7XG5leHBvcnRzLkZMT0FUXzNEX1VOSUZPUk0gPSAnM2YnO1xuZXhwb3J0cy5GTE9BVF80RF9VTklGT1JNID0gJzNmJztcbmV4cG9ydHMuSU5UXzFEX1VOSUZPUk0gPSAnMWknO1xuZXhwb3J0cy5JTlRfMkRfVU5JRk9STSA9ICcyaSc7XG5leHBvcnRzLklOVF8zRF9VTklGT1JNID0gJzNpJztcbmV4cG9ydHMuSU5UXzREX1VOSUZPUk0gPSAnM2knO1xuZXhwb3J0cy5GTE9BVF9UWVBFID0gJ0ZMT0FUJztcbmV4cG9ydHMuSU5UX1RZUEUgPSAnSU5UJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0YW50cy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuR1BHUFUgPSB2b2lkIDA7XG52YXIgR1BHUFVfMSA9IHJlcXVpcmUoXCIuL0dQR1BVXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiR1BHUFVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIEdQR1BVXzEuR1BHUFU7IH0gfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIFZlcnRleCBzaGFkZXIgZm9yIGZ1bGxzY3JlZW4gcXVhZC5cbmV4cG9ydHMuZGVmYXVsdCA9IFwiXFxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbmF0dHJpYnV0ZSB2ZWMyIGFQb3NpdGlvbjtcXG51bmlmb3JtIHZlYzIgdV9zY2FsZTtcXG51bmlmb3JtIHZlYzIgdV90cmFuc2xhdGlvbjtcXG52YXJ5aW5nIHZlYzIgdXY7XFxudm9pZCBtYWluKCkge1xcblxcdC8vIENhbGN1bGF0ZSBVViBjb29yZGluYXRlcyBbMCwgMV0uXFxuXFx0dXYgPSAwLjUgKiAoYVBvc2l0aW9uICsgMS4wKTtcXG5cXHQvLyBBcHBseSB0cmFuc2Zvcm1hdGlvbnMuXFxuXFx0dmVjMiBwb3NpdGlvbiA9IHVfc2NhbGUgKiBhUG9zaXRpb24gKyB1X3RyYW5zbGF0aW9uO1xcblxcdC8vIENhbGN1bGF0ZSB2ZXJ0ZXggcG9zaXRpb24uXFxuXFx0Z2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLCAxKTtcXG59XFxuXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZhdWx0VmVydGV4U2hhZGVyLmpzLm1hcCIsIm1vZHVsZS5leHBvcnRzID0gXCJwcmVjaXNpb24gbG93cCBmbG9hdDtcXG5cXG52YXJ5aW5nIHZlYzIgdXY7XFxudW5pZm9ybSBzYW1wbGVyMkQgdV9zdGF0ZTtcXG51bmlmb3JtIHZlYzIgdV9weFNpemU7XFxuXFxudm9pZCBtYWluKCkge1xcblxcdGZsb2F0IGN1cnJlbnRTdGF0ZSA9IHRleHR1cmUyRCh1X3N0YXRlLCB1dikucjtcXG5cXG5cXHRpbnQgY291bnQgPSAwO1xcblxcdGZvciAoaW50IGkgPSAtMTsgaSA8IDI7IGkrKykge1xcblxcdFxcdGZvciAoaW50IGogPS0gMTsgaiA8IDI7IGorKykge1xcblxcdFxcdFxcdGlmIChpID09IDAgJiYgaiA9PSAwKSBjb250aW51ZTtcXG5cXHRcXHRcXHR2ZWMyIG5laWdoYm9yVVYgPSB1diArIHZlYzIodV9weFNpemUueCAqIGZsb2F0KGkpLCB1X3B4U2l6ZS55ICogZmxvYXQoaikpO1xcblxcdFxcdFxcdGlmICh0ZXh0dXJlMkQodV9zdGF0ZSwgbmVpZ2hib3JVVikuciA9PSAxLjApIGNvdW50Kys7XFxuXFx0XFx0fVxcblxcdH1cXG5cXG5cXHQvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db253YXklMjdzX0dhbWVfb2ZfTGlmZSNSdWxlc1xcblxcdGlmIChjb3VudCA9PSAzIHx8IChjdXJyZW50U3RhdGUgPT0gMS4wICYmIGNvdW50ID09IDIpKSB7XFxuXFx0XFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCgxKTtcXG5cXHRcXHRyZXR1cm47XFxuXFx0fVxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoMCwgMCwgMCwxKTtcXG59XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwicHJlY2lzaW9uIGxvd3AgZmxvYXQ7XFxuXFxudmFyeWluZyB2ZWMyIHV2O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVfbm9pc2VMb29rdXA7XFxuXFxudm9pZCBtYWluKCkge1xcblxcdGZsb2F0IHN0YXRlID0gdGV4dHVyZTJEKHVfbm9pc2VMb29rdXAsIHV2KS5yO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoc3RhdGUsIDAsIDAsIDEpO1xcbn1cXG5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCJwcmVjaXNpb24gbG93cCBmbG9hdDtcXG5cXG52YXJ5aW5nIHZlYzIgdXY7XFxudW5pZm9ybSBzYW1wbGVyMkQgdV9zdGF0ZTtcXG5cXG52b2lkIG1haW4oKSB7XFxuXFx0ZmxvYXQgY3VycmVudFN0YXRlID0gdGV4dHVyZTJEKHVfc3RhdGUsIHV2KS5yO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoY3VycmVudFN0YXRlLCBjdXJyZW50U3RhdGUsIGN1cnJlbnRTdGF0ZSwgMSk7XFxufVwiIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuX193ZWJwYWNrX3JlcXVpcmVfXyg2MDcpO1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgdXNlZCAnZXhwb3J0cycgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuIl0sInNvdXJjZVJvb3QiOiIifQ==